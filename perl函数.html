<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="Stylesheet" type="text/css" href="styles/style.css">
<link rel="Stylesheet" type="text/css" href="styles/style4Toc.css">
<link rel="stylesheet" type="text/css" href="styles/codeStyles/shCore.css">
<link rel="stylesheet" type="text/css" href="styles/codeStyles/shThemeDefault.css">

<title>perl函数</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>

<p>
rindex( $mline, "/" );<br />
</p>



<p>
可以不使用&amp;调用函数。如果之前已经声明或定义函数，在调用的时候可以不使用圆括号。圆括号表示子函数。<br />
</p>

<p>
splice @bb, 2, 6, @cc。@cc为插入的数组，2为插入的地点，6为替换掉的个数。<br />
</p>

<p>
<a href="perl使用系统函数.html">perl使用系统函数</a>
</p>


<h2 id="toc_0.1">实现http上传</h2>
<p>
use LWP::UserAgent;;  <br />
use HTTP::Request;  <br />
use HTTP::Response;  <br />
use HTTP::Request::Common;  <br />
</p>
  
<p>
$agent=new LWP::UserAgent;  <br />
$request=POST('<a href="http://localhost:8080/wm/ab',[name=&gt;'zhangsan']);">http://localhost:8080/wm/ab',[name=&gt;'zhangsan']);</a>  
$request-&gt;header('User-Agent'=&gt;'Mozilla/5.0 (Windows NT 5.1; rv:10.0.1) Gecko/20100101 Firefox/10.0.1');  <br />
$request-&gt;header('Accept-Encoding'=&gt;'gzip, deflate');  <br />
</p>
  
<p>
\(response=\)agent-&gt;request($request);  <br />
print $response-&gt;status_line,"\n";  <br />
print $response-&gt;content;<br />
复制代码<br />
</p>
 

<p>
post 传送文件<br />
</p>

<p>
复制代码<br />
use LWP<br />
require HTTP::Headers;<br />
$agent = LWP::UserAgent-&gt;new;<br />
</p>

<p>
\(response = \)agent-&gt;post("<a href="http://localhost:8080/springtest/fileupload",'Content_Type'">http://localhost:8080/springtest/fileupload",'Content_Type'</a> =&gt; 'multipart/form-data; boundary=----------------------', Content =&gt; [
"user_id"=&gt;"05C30167EA3B4F76AE0D8A4ADB984679",<br />
'pic' =&gt; ["dir"]<br />
#]);<br />
print $response-&gt;content, "\n";<br />
复制代码<br />
</p>
 

<p>
post<br />
</p>

<p>
use LWP<br />
require HTTP::Headers;<br />
$agent = LWP::UserAgent-&gt;new;<br />
\(response = \)agent-&gt;post("<a href="http://localhost:8080/service/store/storeSend",">http://localhost:8080/service/store/storeSend",</a> [ "user_id" =&gt; "05C30167EA3B4F76AE0D8A4ADB984679" , "bno" =&gt; "bnotest001"]);
get<br />
</p>

<p>
复制代码<br />
#! /usr/bin/perl<br />
use LWP;<br />
</p>

<p>
$agent = LWP::UserAgent-&gt;new;<br />
\(response = \)agent-&gt;get("<a href="http://istg.xxxx.com/service/store/storeorder/sendandreceive?userid=23812164&amp;deliveryids=&amp;cmd_type=0");">http://istg.xxxx.com/service/store/storeorder/sendandreceive?userid=23812164&amp;deliveryids=&amp;cmd_type=0");</a>
</p>

<p>
print $response-&gt;content, "\n";<br />
复制代码<br />
get add cookie<br />
</p>

<p>
复制代码<br />
#! /usr/bin/perl<br />
use LWP;<br />
use HTTP::Cookies;<br />
</p>

<p>
$agent = LWP::UserAgent-&gt;new;<br />
</p>

<p>
my $cookies = HTTP::Cookies-&gt;new();<br />
$cookies-&gt;set_cookie(0,'JSESSIONID', 'A9D5B373B86ACDB04914DEC83E3DA40E','/','store.sf-express.com',80,0,0,86400,0);<br />
\(agent-&gt;cookie_jar(\)cookies);<br />
$agent-&gt;cookie_jar({ 'STORE'=&gt;'STORE_POOL_CNSZ01_49_130_8080', 'JSESSIONID'=&gt; '84BCF81B536D5CB13AFA48E31ACAA6B6' });<br />
\(response = \)agent-&gt;get("<a href="http://store.sf-xxxxx.com/html/admin/user_list.html");">http://store.sf-xxxxx.com/html/admin/user_list.html");</a>
</p>

<p>
print $response-&gt;content, "\n";<br />
复制代码<br />
get add header<br />
</p>

<p>
复制代码<br />
#! /usr/bin/perl<br />
use LWP;<br />
use HTTP::Cookies;<br />
</p>

<p>
$agent = LWP::UserAgent-&gt;new;<br />
</p>

<p>
my @netscape_like_headers = (<br />
'User-Agent' =&gt; 'Mozilla/4.76 [en] (Win98; U)',<br />
'Accept-Language' =&gt; 'en-US',<br />
'Accept-Charset' =&gt; 'iso-8859-1,*,utf-8',<br />
'Accept-Encoding' =&gt; 'gzip',<br />
'Accept' =&gt;<br />
"image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, image/png, <strong>/</strong>",);<br />
\(response = \)agent-&gt;get("<a href="http://store.xxxxxx.com/servlet/storeAction?actionType=list",@netscape_like_headers);">http://store.xxxxxx.com/servlet/storeAction?actionType=list",@netscape_like_headers);</a>
</p>

<p>
print $response-&gt;content, "\n";<br />
复制代码<br />
</p>
 

<p>
post add header<br />
</p>

<p>
复制代码<br />
use LWP::UserAgent;;  <br />
use HTTP::Request;  <br />
use HTTP::Response;  <br />
use HTTP::Request::Common;  <br />
</p>
  
<p>
$agent=new LWP::UserAgent;  <br />
$request=POST('<a href="http://localhost:8080/wm/ab',[name=&gt;'zhangsan']);">http://localhost:8080/wm/ab',[name=&gt;'zhangsan']);</a>  
$request-&gt;header('User-Agent'=&gt;'Mozilla/5.0 (Windows NT 5.1; rv:10.0.1) Gecko/20100101 Firefox/10.0.1');  <br />
$request-&gt;header('Accept-Encoding'=&gt;'gzip, deflate');  <br />
</p>
  
<p>
\(response=\)agent-&gt;request($request);  <br />
print $response-&gt;status_line,"\n";  <br />
print $response-&gt;content;  <br />
复制代码<br />
</p>


<div class="foot">
<button id="back_to_topA" class="back_to_top" style='background-color:red'>返回顶部</button>

<a id="returnIndexA" href="d:\vim\vim\mysite\note_html\笔记整理.html" onclick="fun_a()">
<button id=returnIndex class="back_to_index">返回首页</button>
</a>



<HR SIZE=5>
<p class="left">
<!-- <div class="text" style=" text-align:center;font-size:15px"></div>-->
© <span id="year">2018</span> 
</p>
<script src="scripts/my.js"></script>
<script src="scripts/script4Toc.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/XRegExp.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shCore.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shBrushJava.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shBrushJScript.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shBrushSql.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shBrushCSharp.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shBrushCss.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shBrushPerl.js"></script>
<script type="text/javascript">
	SyntaxHighlighter.all()
</script>
</div>
</div>
</body>
</html>
