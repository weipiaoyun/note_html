<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<title>cshell编程</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>

<div class="toc">
<ul>
<li><a href="#toc_1">perl参数传递给csh </a>
<li><a href="#toc_2">常用命令</a>
<li><a href="#toc_3">取整</a>
</ul>
</div>
<div class="content" style="margin-left:20%;padding:1px 16px;height:1000px;">

<h1 id="toc_1">perl参数传递给csh </h1>
<p>
perl里面print 
csh <code>perl</code>
</p>
<h1 id="toc_2">常用命令</h1>
<p>
set infoShuzhu = <code>cat \(GENESIS_TMP/info.\)\( | awk '{print \)3}'</code>
infoShuzhu是一个数组，文件cat出来的第三列所组成的数组。
</p>

<h1 id="toc_3">取整</h1>
<p>
set aa = <code>echo \(bb[\)i] | bc -l | awk '{printf "%1.0f", $1}'</code>
</p>

<p>
set aa = <code>cat \(TMP/message_bar | awk -F, '{print \)10}' | awk -F= '{print \(2}' | awk -F. '{print \)1}'</code>,以，为字段分割符，第十个字段，然后以=作为字段分割符，取第二个字段，最后以点作为分割符，取第一个字段。
</p>


<p>
set aa = \(#ARRAY 最好用set aa = <code>echo \)#ARRAY</code>代替;
Awk 的print等动作要用大括号括起来。
Awk后面的要用单引号括起来。
</p>


<p>
Shell编程
</p>

<p>
Shell语法总结
</p>

<p>
1，	管道命令的前面的命令必须有信号输出才能执行，否则只执行后面的命令。
</p>

<p>
2，	Tee一般是和管道一起使用，表示把标准输出备份一个到一文档里面，同时在终端显示。
</p>

<p>
3，错误重定向Grep “genesis” scripts  2&gt;grep.err不能在csh里面使用，可以在bash里面使用。后面的文件描述符重定向不能有空格。
</p>

<p>
4，@命令不能在bash里面使用，可以在csh里面使用，它是运算命令。Shell语言是用命令组成的，如果直接运算，发现第一个变量不是命令，提示错误。还有shell里面的x不比c语言里面的，x只表示变量，在c里我们还可以把它当作是一个值。
</p>

<p>
5，./执行和source执行有什么不同。./是执行文档文件，它可以设置执行的shell。Source文档名的时候，不管设置的是什么shell，其都是在当前shell环境下执行。
</p>

<p>
6，在shell里面没有分整型变量，全都是字符串变量。所有的数值都由字符串的形式表示。 
</p>

<p>
7，变量：
	对一个变量赋予多个不同的值，用（）。其相当于c里面的数组。
	取消赋值用unset，其以后使用变量的时候会提示underfined variable
8，特定变量：
		#$表示数组全部值
		$# 传递到脚本的参数个数。
		$* 
		$$脚本运行的当前进程ID
		$!后台运行的最后一个进程的进程ID号
</p>

<p>
9，shift命令，左移命令，删除数组第一个值。
</p>

<p>
10，引号：
		双引号里面的可以$取值，单引号里面是什么显示什么。反引号里面的表执行shell命令。反引号也可嵌入到双引号里面，同样表示执行反引号命令。
</p>

<p>
11，有些符号已经代表了某个特定的含义。要表示其本身含义，需前面加反斜杠。
</p>


<p>
14，alias别名。
	Unalias
</p>

<p>
15，控制语句
	Break：跳出全部循环
	Continue：跳出本轮循环，继续判断循环
</p>

<p>
16，Foreach语法
格式：foreach 变量名 （$数组名）
End
循环取数组里面的each放到变量名里面，一次取一个。如：
Foreach word （hello kugou）
	Echo $word
End
程序会取hello kugou数组里面的每一次放一个放到word里面，打印出来！
</p>

<p>
17，$?tmp 在判断语句里判断该值是否已经定义，如果已经定义，返回值1，没有为0.
</p>

<p>
18，If语句后面非0即真，这和c语言里面的是一样的。而在linux里面，操作如果成功返回的是0。$?variable，如果variable没有定义，则返回结果为0，否则为1 
</p>

<p>
19，\!表示的是取得参数，\!:1,表第一个参数，\!:3, 表第三个参数
</p>

<p>
20，数组的赋值和c语言不一样，可以整个数组值全部一起赋值过去，其以空格表示
</p>

<p>
21，附加到某个文档是以换行的方式存储到文档
</p>

<p>
22，如果要把一个文档里面的内容赋值给一个数组变量，必须先把其cat出来
</p>

<p>
23，判断两个值是否不匹配用!~
</p>

<p>
正则表达式和grep，awk
^行的开始
$行的结束
.点任意单字符
*任意多个任意字符。
？匹配单个字符
[]匹配里的面任意一个字符
\&lt;，与^不同，这时单词的开始，若单词的开始存在下面字眼，输出此行。
\&gt;,单词的结束
X\{m\}重复字符x，m次
X\{m，\}至少m次
X\{m，n\}m次到n次s
\w，相当于[a-zA-Z0-9]
\W,\w的反置形式
\b，单词锁定符，\bgrep\b, 只匹配grep单词的行
‘^$’空行
+和？只适用于awk，不适用于grep
</p>

<p>
一、	Grep
功能：在文件里搜索匹配模式。如果搜到，打印该行。
格式: grep  选项  正则表达式  文件。
注意：输入字符串或变量时，最好用双引号括起来，在匹配模式的时候用单引号
-c 显示包含字符串的行号
-v 非匹配行
-i 忽略大小写
-b 打印块号码
</p>

<p>
例：
1，	要搜寻带有&lt;tab&gt;键的字符串。
Grep “sdf	”  test #f后面使用tab键在正常情况下，终端是无法输入&lt;tab&gt;键的，这只能在文本脚本里面使用。
2，	搜寻只含sdf字符串的精确匹配
Grep “\bsdf\b” test #如果前后没有锁定，搜寻出的结果是包含所有具有sdf的行
3，	搜寻不是以sdf为行开头的。
Grep “<sup><small>[</small></sup>sdf]” test #第一个<sup><small>表示行开头，第二个</small></sup>表示的是非。
</p>

<p>
Fgrep, 快速grep，可以同时搜索多个字符串，但不能使用正则表达式
Egrep，不仅可以搜索多个字符串，也可使用正则表达式。
</p>


<p>
二、	Awk
抽取数据包。还可进行命令操作。采用逐行扫描的方式，从第一行到最后一行。匹配特定模式。
Awk [option] 
</p>

<p>
Awk由模式和动作组成。，模式和动作要用单引号括起来。
模式可以是条件语句，复合语句，或者是正则表达式。其决定触发时间和触发事件
</p>

<p>
例: Awk ‘/genesis/’ /etc/passwd  genesis要放在//里面，//为字符串格式匹配，中间不能有空格。最外面还有一个引号。
</p>

<p>
例：echo  3，2  |  awk ‘{if  (\(1&lt;\)2) print 1; else print 2}’  注意，动作必须用{}括起来，命令与命令之间用分号隔开。
</p>

<p>
记录和域
在awk中，awk以换行符结束的行称为一个记录（一行一记录）。保存在内建变量ORS和RS中。每个单词称为一个域，默认情况下以空格或tab分隔，awk可以跟踪域的个数，并在内建变量NF中保存该值。
NR：行号计数器，每处理完一条记录，NR就会加1，
</p>

<p>
例：cat gui | awk ‘/^(a|s)/’查找以a或者是s开头的行
例：awk ‘$1 ~/^..c/’ gui   域1里面第三个是c的行
例：awk ‘{x = 1; while(x &lt;= 10) {print x; x++}}’ test
因为awk是逐行逐行扫描的，每扫描一行，awk后面的就执行一次。这里的x本身表示其值，所以如果test有85行，则一次打印1-10，一共执行85次，故有850行打印出来。这里的\(x表示\)1等，所以，如果x改为$x, 打印出来的是一个域一个域的。里面的语法符合c语言的。（awk第一行，awk第二行，……）
</p>

<p>
例：awk –F. ‘/abc/{ptint $1}’ tmp
在默认情况下，awk是以空格和Tab键为域的分隔符。加上-F参数以后，后面点作为域分隔符。匹配到abc后打印的域以.作为分割。
</p>


<p>
三、	Sed
1，	流编辑器（可编辑，删除，替换，插入等操作）
2，	不仅可以编辑文本文件，还可进行管道编辑
3，	参数 –n
例：sed –n ‘3p’ tmp  #p打印，显示第三行
	Sed –n ‘1, 3p’ tmp #显示一到三行也可以用  sed –n ‘3q’
	Sed –n ‘$p’ tmp #显示最后一行
	Sed –n ‘/lin/p’  tmp #打印匹配lin的行
	Sed –n ‘/lin/\!p’ tmp #匹配到lin行，不打印它，其他都打印
	Sed –n ‘2,/liu/p’  tmp#看第二行是否有liu，如果有打印第二行
	Sed –n ‘/^.\{3\}/p’ tmp #打印三个以上的行
	Sed –n ‘/2liu.<strong>cai.</strong>.lin/\!d’ tmp #打印包含2liu， cai * lin的行
</p>
	
<p>
删除包含某个字符串的行。注意不直接操作源文件，而是一个临时空间。如果要改变源文件，需要重定向它。
Sed –n /string/d tmp
</p>

<p>
四、	数据处理工具sort
在默认情况下sort的排序方式是ASCLL码的顺序进行排序。
Sort的域0是第一列；1表第二列。
如果要排序第二列，sort –k1 tmp
</p>

<p>
五、	Uniq
Uniq命令作用：重复行：1，只显示一次。2，全不显示
一般情况下，uniq使用之前已经对其分类，并且假定其是正确的情况下执行的。
1，	Uniq的唯一性体现在同一区域重复出现的。当有其它隔开的时候，不认为是重复的。
2，	-u参数，重复行不显示，只显示不重复行
3，	-d参数，只显示有重复的行。
4，	-c参数，打印每一重复行出现的次数。
5，	-f参数，后面接个n数字，表前n个域被忽略。
</p>


<p>
六、	Sort排序工具
对数据进行管理，分类
1，	sort默认的情况下是按照第一数字排序的，如果要按照大小顺序排序，需要加上-n参数。
2，	–t参数，后面还跟一个参数，表示以其作为域的分隔符
3，	-kn参数，对第n个域进行排序
例：sort –n –t ‘a’-k3  kaka
</p>

<p>
七、	Sed工具
对文本进行拷贝编辑
1，Sed  –n ‘2p’dada    -n表示行号，2p表示print第二行.
2，Sed  s/\’/bibi/g   s(search) \’表示‘替换bibi，g表示global
</p>

<button class="back_to_top" style='background-color:red'>返回顶部</button>

<a href="https://weipiaoyun.github.io/note_html/笔记整理.html">
<button class="back_to_index" style='background-color:red'>返回首页</button>
</a>

<script src="my.js"></script>
<HR SIZE=5>
<p class="left">
<!-- <div class="text" style=" text-align:center;font-size:15px"></div>-->
© <span id="year">2018</span> 
</p>
</div>
</body>
</html>
