<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<link rel="Stylesheet" type="text/css" href="style.css">
<link rel="Stylesheet" type="text/css" href="styles/style.css">
<link rel="stylesheet" type="text/css" href="styles/codeStyles/shCore.css">
<link rel="stylesheet" type="text/css" href="styles/codeStyles/shThemeDefault.css">

<title>库函数解释</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>

<p>
部分库函数简介<br />
</p>


<p>
一、通用输入/输出（GPIO）--------------------------------------------------------------------------------------------3<br />
二、外部中断/事件控制器（EXTI）-----------------------------------------------------------------------------------7<br />
三、通用定时器（TIM）-------------------------------------------------------------------------------------------------9<br />
四：ADC寄存器------------------------------------------------------------------------25<br />
五：备份寄存器（BKP）-------------------------------------------------------------------------------------------------33<br />
六、DMA控制器（DMA）---------------------------------------------------------------37<br />
七、复位和时钟设置（RCC）------------------------------------------------------------------------------------------41<br />
八、嵌套向量中断控制器（NVIC）-----------------------------------------------------------------------------------49<br />
</p>
















































<p>
命名规则<br />
</p>

<p>
	在函数名中，只允许存在一个下划线，用以分隔外设缩写和函数名的其它部分。<br />
</p>
	
<p>
	名为PPP_Init的函数，其功能是根据PPP_InitTypeDef中指定的参数，初始化外设PPP，例如TIM_Init.<br />
</p>
	
<p>
	名为PPP_DeInit的函数，其功能为复位外设PPP的所有寄存器至缺省值，例如TIM_DeInit. <br />
</p>
	
<p>
	名为PPP_StructInit的函数，其功能为通过设置PPP_InitTypeDef 结构中的各种参数来定义外设的功能，例如：USART_StructInit <br />
</p>
	
<p>
	名为PPP_Cmd的函数，其功能为使能或者失能外设PPP，例如： SPI_Cmd. <br />
</p>
	
<p>
	名为PPP_ITConfig的函数，其功能为使能或者失能来自外设PPP某中断源，例如： RCC_ITConfig. <br />
</p>
	
<p>
	名为PPP_DMAConfig的函数，其功能为使能或者失能外设PPP的DMA接口，例如：TIM1_DMAConfig. 用以配置外设功能的函数，总是以字符串“Config”结尾，例如GPIO_PinRemapConfig. <br />
</p>
	
<p>
	名为PPP_GetFlagStatus的函数，其功能为检查外设PPP某标志位被设置与否，例如：I2C_GetFlagStatus. <br />
</p>
	
<p>
	名为PPP_ClearFlag的函数，其功能为清除外设PPP标志位，例如：I2C_ClearFlag. <br />
</p>
	
<p>
	名为PPP_GetITStatus的函数，其功能为判断来自外设PPP的中断发生与否，例如：I2C_GetITStatus. <br />
</p>
	
<p>
	名为PPP_ClearITPendingBit的函数，其功能为清除外设PPP中断待处理标志位，例如： I2C_ClearITPendingBit.<br />
</p>
	
	
<p>
typedef signed long s32; <br />
typedef signed short s16; <br />
typedef signed char s8; <br />
typedef signed long const sc32; /* Read Only */<br />
typedef signed short const sc16; /* Read Only */ <br />
typedef signed char const sc8; /* Read Only */ <br />
typedef volatile signed long vs32; <br />
typedef volatile signed short vs16; <br />
typedef volatile signed char vs8; <br />
typedef volatile signed long const vsc32; /* Read Only */ <br />
typedef volatile signed short const vsc16; /* Read Only */ <br />
typedef volatile signed char const vsc8; /* Read Only */ <br />
typedef unsigned long u32; <br />
typedef unsigned short u16; <br />
typedef unsigned char u8; <br />
typedef unsigned long const uc32; /* Read Only */ <br />
typedef unsigned short const uc16; /* Read Only */ <br />
typedef unsigned char const uc8; /* Read Only */ <br />
typedef volatile unsigned long vu32; <br />
typedef volatile unsigned short vu16; <br />
typedef volatile unsigned char vu8; <br />
typedef volatile unsigned long const vuc32; /* Read Only */ <br />
typedef volatile unsigned short const vuc16; /* Read Only */ <br />
typedef volatile unsigned char const vuc8; /* Read Only */<br />
</p>




<p>
一、通用输入/输出（GPIO）<br />
</p>




<p>
GPIO寄存器结构<br />
</p>

<p>
GPIO_TypeDef和AFIO_TypeDef，在文件“stm32f10x_map.h”中定义如下： <br />
typedef struct <br />
{ <br />
vu32 CRL; <br />
vu32 CRH; <br />
vu32 IDR; <br />
vu32 ODR; <br />
vu32 BSRR; <br />
vu32 BRR; <br />
vu32 LCKR; <br />
} <br />
GPIO_TypeDef; <br />
typedef struct <br />
{ <br />
vu32 EVCR; <br />
vu32 MAPR; <br />
vu32 EXTICR[4]; <br />
} <br />
AFIO_TypeDef;<br />
</p>




<p>
GPIO库函数<br />
</p>


<p>
1 函数GPIO_DeInit<br />
</p>

<p>
功能描述：将外设GPIOx寄存器重设为缺省值<br />
例：<br />
GPIO_DeInit(GPIOA);<br />
</p>


<p>
2 函数GPIO_AFIODeInit<br />
</p>

<p>
功能描述：将复用功能（重映射事件控制和EXTI设置）重设为缺省值<br />
例：<br />
GPIO_AFIODeInit();<br />
</p>



<p>
3 函数GPIO_Init<br />
</p>

<p>
功能描述：根据GPIO_InitStruct中指定的参数初始化外设GPIOx寄存器<br />
例：<br />
GPIO_InitTypeDef GPIO_InitStructure; <br />
GPIO_InitStructure.GPIO_Pin = GPIO_Pin_All; <br />
GPIO_InitStructure.GPIO_Speed = GPIO_Speed_10MHz; <br />
GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING; <br />
GPIO_Init(GPIOA, &amp;GPIO_InitStructure);<br />
</p>

<p>
GPIO_InitTypeDef structure <br />
GPIO_InitTypeDef定义于文件“stm32f10x_gpio.h”： <br />
typedef struct <br />
{ <br />
u16 GPIO_Pin; <br />
GPIOSpeed_TypeDef GPIO_Speed; <br />
GPIOMode_TypeDef GPIO_Mode; <br />
} <br />
GPIO_InitTypeDef; <br />
GPIO_Pin <br />
该参数选择待设置的GPIO管脚，使用操作符“|”可以一次选中多个管脚。可以使用下表中的任意组合。<br />
GPIO_Pin_None：无管脚被选中 <br />
GPIO_Pin_x：选中管脚x（0--15）<br />
GPIO_Pin_All：选中全部管脚<br />
</p>

<p>
GPIO_Speed <br />
GPIO_Speed：用以设置选中管脚的速率。<br />
GPIO_Speed_10MHz：最高输出速率10MHz <br />
GPIO_Speed_2MHz：最高输出速率2MHz <br />
GPIO_Speed_50MHz：最高输出速率50MHz <br />
</p>

<p>
GPIO_Mode <br />
GPIO_Mode：用以设置选中管脚的工作状态。<br />
GPIO_Mode_AIN：模拟输入 <br />
GPIO_Mode_IN_FLOATING：浮空输入 <br />
GPIO_Mode_IPD：下拉输入 <br />
GPIO_Mode_IPU：上拉输入 <br />
GPIO_Mode_Out_OD：开漏输出 <br />
GPIO_Mode_Out_PP：推挽输出 <br />
GPIO_Mode_AF_OD：复用开漏输出 <br />
GPIO_Mode_AF_PP：复用推挽输出<br />
</p>


<p>
4 函数GPIO_StructInit<br />
</p>

<p>
功能描述：把GPIO_InitStruct中的每一个参数按缺省值填入<br />
例：<br />
GPIO_InitTypeDef GPIO_InitStructure; <br />
GPIO_StructInit(&amp;GPIO_InitStructure);<br />
</p>

<p>
GPIO_InitStruct：<br />
GPIO_Pin：GPIO_Pin_All <br />
GPIO_Speed：GPIO_Speed_2MHz <br />
GPIO_Mode：GPIO_Mode_IN_FLOATING<br />
</p>


<p>
5 函数GPIO_ReadInputDataBit<br />
</p>

<p>
功能描述：读取指定端口管脚的输入<br />
例：<br />
u8 ReadValue; <br />
ReadValue = GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_7);<br />
</p>


<p>
6 函数GPIO_ReadInputData<br />
</p>

<p>
功能描述：读取指定的GPIO端口输入<br />
例：<br />
u16 ReadValue; <br />
ReadValue = GPIO_ReadInputData(GPIOC);<br />
</p>


<p>
7 函数GPIO_ReadOutputDataBit<br />
</p>

<p>
功能描述：读取指定端口管脚的输出<br />
例：<br />
u8 ReadValue; <br />
ReadValue = GPIO_ReadOutputDataBit(GPIOB, GPIO_Pin_7);<br />
</p>


<p>
8 函数GPIO_ReadOutputData<br />
</p>

<p>
功能描述：读取指定的GPIO端口输出<br />
例：<br />
u16 ReadValue; <br />
ReadValue = GPIO_ReadOutputData(GPIOC);<br />
</p>


<p>
9 函数GPIO_SetBits<br />
</p>

<p>
功能描述：置位指定的数据端口位<br />
例： <br />
GPIO_SetBits(GPIOA, GPIO_Pin_10 | GPIO_Pin_15);<br />
</p>



<p>
10 函数GPIO_ResetBits<br />
</p>

<p>
功能描述：清除指定的数据端口位<br />
例：<br />
GPIO_ResetBits(GPIOA, GPIO_Pin_10 | GPIO_Pin_15);<br />
</p>


<p>
11 函数GPIO_WriteBit<br />
</p>

<p>
功能描述：设置或者清除指定的数据端口位<br />
例： <br />
GPIO_WriteBit(GPIOA, GPIO_Pin_15, Bit_SET);<br />
</p>



<p>
12 函数GPIO_Write<br />
</p>

<p>
功能描述：向指定GPIO数据端口写入数据<br />
例： <br />
GPIO_Write(GPIOA, 0x1101);<br />
</p>


<p>
13 函数GPIO_PinLockConfig<br />
</p>

<p>
功能描述：锁定GPIO管脚设置寄存器<br />
例： <br />
GPIO_PinLockConfig(GPIOA, GPIO_Pin_0 | GPIO_Pin_1);<br />
</p>


<p>
14 函数GPIO_EventOutputConfig<br />
</p>

<p>
功能描述：选择GPIO管脚用作事件输出<br />
例： <br />
GPIO_EventOutputConfig(GPIO_PortSourceGPIOE, GPIO_PinSource5);<br />
</p>

<p>
GPIO_PortSource <br />
GPIO_PortSource用以选择用作事件输出的GPIO端口。<br />
</p>

<p>
GPIO_PinSource <br />
GPIO_PinSource用以选择用作事件输出的GPIO管脚。<br />
</p>


<p>
15 函数GPIO_EventOutputCmd<br />
</p>

<p>
功能描述：使能或者失能事件输出<br />
</p>

<p>
例： <br />
GPIO_EventOutputConfig(GPIO_PortSourceGPIOC, GPIO_PinSource6); <br />
GPIO_EventOutputCmd(ENABLE);<br />
</p>


<p>
16 函数GPIO_PinRemapConfig<br />
功能描述：改变指定管脚的映射<br />
例： <br />
GPIO_PinRemapConfig(GPIO_Remap_I2C1, ENABLE);<br />
</p>


<p>
GPIO_Remap <br />
GPIO_Remap用以选择用作事件输出的GPIO端口。<br />
GPIO_Remap_SPI1：SPI1复用功能映射<br />
GPIO_Remap_I2C1：I2C1复用功能映射<br />
GPIO_Remap_USART1：USART1复用功能映射<br />
GPIO_PartialRemap_USART3：USART2复用功能映射<br />
GPIO_FullRemap_USART3：USART3复用功能完全映射<br />
GPIO_PartialRemap_TIM1：USART3复用功能部分映射<br />
GPIO_FullRemap_TIM1：TIM1复用功能完全映射<br />
GPIO_PartialRemap1_TIM2：TIM2复用功能部分映射1 <br />
GPIO_PartialRemap2_TIM2：TIM2复用功能部分映射2 <br />
GPIO_FullRemap_TIM2：TIM2复用功能完全映射<br />
GPIO_PartialRemap_TIM3：TIM3复用功能部分映射<br />
GPIO_FullRemap_TIM3：TIM3复用功能完全映射<br />
GPIO_Remap_TIM4：TIM4复用功能映射<br />
GPIO_Remap1_CAN：CAN复用功能映射1 <br />
GPIO_Remap2_CAN：CAN复用功能映射2 <br />
GPIO_Remap_PD01：PD01复用功能映射<br />
GPIO_Remap_SWJ_NoJTRST：除JTRST外SWJ完全使能（JTAG+SW-DP） <br />
GPIO_Remap_SWJ_JTAGDisable：JTAG-DP失能 + SW-DP使能<br />
GPIO_Remap_SWJ_Disable：SWJ完全失能（JTAG+SW-DP）<br />
</p>


<p>
17 函数GPIO_EXTILineConfig<br />
</p>

<p>
功能描述：选择GPIO管脚用作外部中断线路<br />
例： <br />
GPIO_EXTILineConfig(GPIO_PortSource_GPIOB, GPIO_PinSource8);<br />
</p>


<p>
二、外部中断/事件控制器（EXTI）<br />
</p>




<p>
EXTI寄存器结构<br />
</p>

<p>
EXTI_TypeDef，在文件“stm32f10x_map.h”中定义如下：<br />
typedef struct <br />
{ <br />
vu32 IMR; <br />
vu32 EMR; <br />
vu32 RTSR; <br />
vu32 FTSR; <br />
vu32 SWIER; <br />
vu32 PR; <br />
} <br />
EXTI_TypeDef;<br />
</p>





<p>
EXTI库函数<br />
</p>


<p>
1 函数EXTI_DeInit<br />
</p>

<p>
功能描述：将外设EXTI寄存器重设为缺省值<br />
例：<br />
EXTI_DeInit();<br />
</p>


<p>
2 函数EXTI_Init<br />
</p>

<p>
功能描述：根据EXTI_InitStruct中指定的参数初始化外设EXTI寄存器<br />
例：<br />
EXTI_InitTypeDef EXTI_InitStructure; <br />
EXTI_InitStructure.EXTI_Line = EXTI_Line12 | EXTI_Line14; <br />
EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt; <br />
EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Falling; <br />
EXTI_InitStructure.EXTI_LineCmd = ENABLE; <br />
EXTI_Init(&amp;EXTI_InitStructure);<br />
</p>

<p>
EXTI_InitTypeDef structure <br />
EXTI_InitTypeDef定义于文件“stm32f10x_exti.h”： <br />
typedef struct <br />
{ u32 EXTI_Line; <br />
EXTIMode_TypeDef EXTI_Mode; <br />
EXTIrigger_TypeDef EXTI_Trigger; <br />
FunctionalState EXTI_LineCmd; <br />
} <br />
EXTI_InitTypeDef;<br />
</p>

<p>
EXTI_Line <br />
EXTI_Line选择了待使能或者失能的外部线路。<br />
EXTI_Linex：外部中断线x（0--18）<br />
</p>

<p>
EXTI_Mode <br />
EXTI_Mode：设置了被使能线路的模式。<br />
EXTI_Mode_Event：设置EXTI线路为事件请求<br />
EXTI_Mode_Interrupt：设置EXTI线路为中断请求<br />
</p>

<p>
EXTI_Trigger <br />
EXTI_Trigger：设置了被使能线路的触发边沿。<br />
EXTI_Trigger_Falling：设置输入线路下降沿为中断请求 <br />
EXTI_Trigger_Rising：设置输入线路上升沿为中断请求 <br />
EXTI_Trigger_Rising_Falling：设置输入线路上升沿和下降沿为中断请求<br />
</p>

<p>
EXTI_LineCmd <br />
EXTI_LineCmd用来定义选中线路的新状态。它可以被设为ENABLE或者DISABLE。<br />
</p>


<p>
3 函数EXTI_StructInit<br />
</p>

<p>
功能描述：把EXTI_InitStruct中的每一个参数按缺省值填入<br />
例： <br />
EXTI_InitTypeDef EXTI_InitStructure; <br />
EXTI_StructInit(&amp;EXTI_InitStructure);<br />
</p>

<p>
EXTI_InitStruct缺省值<br />
EXTI_Line： EXTI_LineNone <br />
EXTI_Mode： EXTI_Mode_Interrupt <br />
EXTI_Trigger： EXTI_Trigger_Falling <br />
EXTI_LineCmd： DISABLE<br />
</p>


<p>
4 函数EXTI_GenerateSWInterrupt<br />
功能描述：产生一个软件中断<br />
例：<br />
EXTI_GenerateSWInterrupt(EXTI_Line6);<br />
</p>


<p>
5 函数EXTI_GetFlagStatus<br />
功能描述：检查指定的EXTI线路标志位设置与否<br />
例： <br />
FlagStatus EXTIStatus; <br />
EXTIStatus = EXTI_GetFlagStatus(EXTI_Line8);<br />
</p>


<p>
6 函数EXTI_ClearFlag<br />
</p>

<p>
功能描述：清除EXTI线路挂起标志位<br />
例：<br />
EXTI_ClearFlag(EXTI_Line2);<br />
</p>

<p>
7 函数EXTI_GetITStatus<br />
功能描述：检查指定的EXTI线路触发请求发生与否<br />
例： <br />
ITStatus EXTIStatus; <br />
EXTIStatus = EXTI_GetITStatus(EXTI_Line8);<br />
</p>


<p>
8 函数EXTI_ClearITPendingBit<br />
</p>

<p>
功能描述：清除EXTI线路挂起位<br />
例： <br />
EXTI_ClearITpendingBit(EXTI_Line2);<br />
</p>




<p>
三、通用定时器（TIM）<br />
</p>


<p>
TIM寄存器结构<br />
</p>

<p>
TIM_TypeDeff，在文件“stm32f10x_map.h”中定义如下： <br />
typedef struct <br />
{ <br />
vu16 CR1; <br />
u16 RESERVED0; <br />
vu16 CR2; <br />
u16 RESERVED1; <br />
vu16 SMCR; <br />
u16 RESERVED2; <br />
vu16 DIER; <br />
u16 RESERVED3; <br />
vu16 SR; <br />
u16 RESERVED4; <br />
vu16 EGR; <br />
u16 RESERVED5; <br />
vu16 CCMR1; <br />
u16 RESERVED6; <br />
vu16 CCMR2; <br />
u16 RESERVED7; <br />
vu16 CCER; <br />
u16 RESERVED8; <br />
vu16 CNT; <br />
u16 RESERVED9; <br />
vu16 PSC; <br />
u16 RESERVED10; <br />
vu16 ARR; <br />
u16 RESERVED11[3]; <br />
vu16 CCR1; <br />
u16 RESERVED12; <br />
vu16 CCR2; <br />
u16 RESERVED13; <br />
vu16 CCR3; <br />
u16 RESERVED14; <br />
vu16 CCR4; <br />
u16 RESERVED15[3]; <br />
vu16 DCR; <br />
u16 RESERVED16; <br />
vu16 DMAR; <br />
u16 RESERVED17; <br />
} <br />
TIM_TypeDef;<br />
</p>


<p>
TIM库函数<br />
</p>


<p>
1 函数TIM_DeInit<br />
</p>

<p>
功能描述：将外设TIMx寄存器重设为缺省值<br />
例： <br />
TIM_DeInit(TIM2);<br />
</p>


<p>
2 函数TIM_TimeBaseInit<br />
</p>

<p>
功能描述：根据TIM_TimeBaseInitStruct中指定的参数初始化TIMx的时间基数单位<br />
例： <br />
TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure; <br />
TIM_TimeBaseStructure.TIM_Period = 0xFFFF; <br />
TIM_TimeBaseStructure.TIM_Prescaler = 0xF; <br />
TIM_TimeBaseStructure.TIM_ClockDivision = 0x0; <br />
TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up; <br />
TIM_TimeBaseInit(TIM2, &amp; TIM_TimeBaseStructure);<br />
</p>


<p>
TIM_TimeBaseInitTypeDef structure <br />
TIM_TimeBaseInitTypeDef定义于文件“stm32f10x_tim.h”： <br />
typedef struct <br />
{ <br />
u16 TIM_Period; <br />
u16 TIM_Prescaler; <br />
u8 TIM_ClockDivision; <br />
u16 TIM_CounterMode; <br />
} TIM_TimeBaseInitTypeDef; <br />
</p>

<p>
TIM_Period <br />
TIM_Period设置了在下一个更新事件装入活动的自动重装载寄存器周期的值。它的取值必须在0x0000和0xFFFF之间。<br />
</p>

<p>
TIM_Prescaler <br />
TIM_Prescaler设置了用来作为TIMx时钟频率除数的预分频值。它的取值必须在0x0000和0xFFFF之间。<br />
</p>

<p>
TIM_ClockDivision <br />
TIM_ClockDivision设置了时钟分割。<br />
TIM_CKD_DIV1：TDTS = Tck_tim <br />
TIM_CKD_DIV2：TDTS = 2Tck_tim <br />
TIM_CKD_DIV4：TDTS = 4Tck_tim<br />
</p>

<p>
TIM_CounterMode <br />
TIM_CounterMode选择了计数器模式。<br />
TIM_CounterMode_Up：TIM向上计数模式<br />
TIM_CounterMode_Down：TIM向下计数模式<br />
TIM_CounterMode_CenterAligned1：TIM中央对齐模式1计数模式<br />
TIM_CounterMode_CenterAligned2：TIM中央对齐模式2计数模式<br />
TIM_CounterMode_CenterAligned3：TIM中央对齐模式3计数模式<br />
</p>


<p>
3 函数TIM_OCInit<br />
</p>

<p>
功能描述：根据TIM_OCInitStruct中指定的参数初始化外设TIMx<br />
例： <br />
TIM_OCInitTypeDef TIM_OCInitStructure; <br />
TIM_OCInitStructure.TIM_OCMode = TIM_OCMode_PWM1; <br />
TIM_OCInitStructure.TIM_Channel = TIM_Channel_1; <br />
TIM_OCInitStructure.TIM_Pulse = 0x3FFF; <br />
TIM_OCInitStructure.TIM_OCPolarity = TIM_OCPolarity_High; <br />
TIM_OCInit(TIM2, &amp; TIM_OCInitStructure);<br />
</p>

<p>
TIM_OCInitStruct：<br />
指向结构TIM_OCInitTypeDef的指针，包含了TIMx时间基数单位的配置信息<br />
</p>

<p>
TIM_OCInitTypeDef structure <br />
TIM_OCInitTypeDef定义于文件“stm32f10x_tim.h”： <br />
typedef struct <br />
{ <br />
u16 TIM_OCMode; <br />
u16 TIM_Channel; <br />
u16 TIM_Pulse; <br />
u16 TIM_OCPolarity; <br />
} <br />
TIM_OCInitTypeDef; <br />
</p>

<p>
TIM_OCMode <br />
TIM_OCMode选择定时器模式。<br />
TIM_OCMode_Timing：TIM输出比较时间模式<br />
TIM_OCMode_Active：TIM输出比较主动模式<br />
TIM_OCMode_Inactive：TIM输出比较非主动模式<br />
TIM_OCMode_Toggle：TIM输出比较触发模式<br />
TIM_OCMode_PWM1：TIM脉冲宽度调制模式1 <br />
TIM_OCMode_PWM2：TIM脉冲宽度调制模式2<br />
</p>

<p>
TIM_Channel <br />
TIM_Channel选择通道。<br />
TIM_Channel_1：使用TIM通道1 <br />
TIM_Channel_2：使用TIM通道2 <br />
TIM_Channel_3：使用TIM通道3 <br />
TIM_Channel_4：使用TIM通道4<br />
</p>

<p>
TIM_Pulse <br />
TIM_Pulse设置了待装入捕获比较寄存器的脉冲值。它的取值必须在0x0000和0xFFFF之间。<br />
</p>

<p>
TIM_OCPolarity <br />
TIM_OCPolarity输出极性。<br />
TIM_OCPolarity_High：TIM输出比较极性高<br />
TIM_OCPolarity_Low：TIM输出比较极性低<br />
</p>


<p>
4 函数TIM_ICInit<br />
</p>

<p>
功能描述：根据TIM_ICInitStruct中指定的参数初始化外设TIMx<br />
例： <br />
TIM_DeInit(TIM2); <br />
TIM_ICStructInit(&amp;TIM_ICInitStructure); <br />
TIM_ICInitStructure.TIM_ICMode = TIM_ICMode_PWMI; <br />
TIM_ICInitStructure.TIM_Channel = TIM_Channel_1; <br />
TIM_ICInitStructure.TIM_ICPolarity = TIM_ICPolarity_Rising; <br />
TIM_ICInitStructure.TIM_ICSelection = TIM_ICSelection_DirectTI; <br />
TIM_ICInitStructure.TIM_ICPrescaler = TIM_ICPSC_DIV1; <br />
TIM_ICInitStructure.TIM_ICFilter = 0x0; <br />
TIM_ICInit(TIM2, &amp;TIM_ICInitStructure);<br />
</p>

<p>
TIM_ICInitStruct：指向结构TIM_ICInitTypeDef的指针，包含了TIMx的配置信息<br />
TIM_ICInitTypeDef structure <br />
TIM_ICInitTypeDef定义于文件“stm32f10x_tim.h”： <br />
typedef struct <br />
{ <br />
u16 TIM_ICMode; <br />
u16 TIM_Channel; <br />
u16 TIM_ICPolarity; <br />
u16 TIM_ICSelection; <br />
u16 TIM_ICPrescaler; <br />
u16 TIM_ICFilter; <br />
} <br />
TIM_ICInitTypeDef; <br />
</p>

<p>
TIM_ICMode <br />
TIM_ICMode选择了TIM输入捕获模式。<br />
TIM_ICMode_ICAP：TIM使用输入捕获模式<br />
TIM_ICMode_PWMI：TIM使用输入PWM模式<br />
</p>

<p>
TIM_Channel <br />
TIM_Channel选择通道。<br />
TIM_Channel_1 使用TIM通道1 <br />
TIM_Channel_2 使用TIM通道2 <br />
TIM_Channel_3 使用TIM通道3 <br />
TIM_Channel_4 使用TIM通道4<br />
</p>

<p>
TIM_ICPolarity <br />
TIM_ICPolarity输入活动沿。<br />
TIM_ICPolarity_Rising：TIM输入捕获上升沿<br />
TIM_ICPolarity_Falling：TIM输入捕获下降沿<br />
</p>

<p>
TIM_ICSelection <br />
TIM_ICSelection选择输入。<br />
TIM_ICSelection_DirectTI：TIM输入2，3或4选择对应地与IC1或IC2或IC3或IC4相连<br />
TIM_ICSelection_IndirectTI：TIM输入2，3或4选择对应地与IC2或IC1或IC4或IC3相连<br />
TIM_ICSelection_TRC：TIM输入2，3或4选择与TRC相连<br />
</p>

<p>
TIM_ICPrescaler <br />
TIM_ICPrescaler设置输入捕获预分频器。<br />
TIM_ICPSC_DIV1：TIM捕获在捕获输入上每探测到一个边沿执行一次<br />
TIM_ICPSC_DIV2：TIM捕获每2个事件执行一次<br />
TIM_ICPSC_DIV3：TIM捕获每3个事件执行一次<br />
TIM_ICPSC_DIV4：TIM捕获每4个事件执行一次<br />
</p>

<p>
TIM_ICFilter <br />
TIM_ICFilter选择输入比较滤波器。该参数取值在0x0和0xF之间。<br />
</p>


<p>
5 函数TIM_TimeBaseStructInit<br />
</p>

<p>
功能描述：把TIM_TimeBaseInitStruct中的每一个参数按缺省值填入<br />
TIM_TimeBaseInitStruct：指向结构TIM_TimeBaseInitTypeDef的指针，待初始化<br />
</p>

<p>
TIM_TimeBaseInitStruct缺省值<br />
TIM_Period：TIM_Period_Reset_Mask <br />
TIM_Prescaler：TIM_Prescaler_Reset_Mask <br />
TIM_CKD：TIM_CKD_DIV1 <br />
TIM_CounterMode：TIM_CounterMode_Up<br />
</p>

<p>
例：  <br />
TIM_TimeBaseInitTypeDef TIM_TimeBaseInitStructure; <br />
TIM_TimeBaseStructInit(&amp; TIM_TimeBaseInitStructure);<br />
</p>



<p>
6 函数TIM_OCStructInit<br />
</p>

<p>
功能描述：把TIM_OCInitStruct中的每一个参数按缺省值填入<br />
TIM_OCInitStruct：指向结构TIM_OCInitTypeDef的指针，待初始化<br />
</p>

<p>
例： <br />
TIM_OCInitTypeDef TIM_OCInitStructure; <br />
TIM_OCStructInit(&amp; TIM_OCInitStructure);<br />
</p>

<p>
TIM_OCInitStruct缺省值<br />
TIM_OCMode：TIM_OCMode_Timing <br />
TIM_Channel：TIM_Channel_1 <br />
TIM_Pulse：TIM_Pulse_Reset_Mask <br />
TIM_OCPolarity：TIM_OCPolarity_High<br />
</p>


<p>
7 函数TIM_ICStructInit<br />
</p>

<p>
功能描述：把TIM_ICInitStruct中的每一个参数按缺省值填入<br />
TIM_ICInitStruct：指向结构TIM_ICInitTypeDef的指针，待初始化<br />
例： <br />
TIM_ICInitTypeDef TIM_ICInitStructure; <br />
TIM_ICStructInit(&amp; TIM_ICInitStructure);<br />
</p>

<p>
TIM_ICInitStruct缺省值<br />
TIM_ICMode：TIM_ICMode_ICAP <br />
TIM_Channel：TIM_Channel_1 <br />
TIM_ICPolarity：TIM_ICPolarity_Rising <br />
TIM_ICSelection：TIM_ICSelection_DirectTI <br />
TIM_ICPrescaler：TIM_ICPSC_DIV1 <br />
TIM_ICFilter：TIM_ICFilter_Mask<br />
</p>



<p>
8 函数TIM_Cmd<br />
功能描述：使能或者失能TIMx外设<br />
例： <br />
TIM_Cmd(TIM2, ENABLE);<br />
</p>


<p>
9 函数TIM _ITConfig<br />
</p>

<p>
功能描述：使能或者失能指定的TIM中断<br />
例： <br />
TIM_ITConfig(TIM2, TIM_IT_CC1, ENABLE );<br />
</p>

<p>
TIM_IT <br />
输入参数TIM_IT使能或者失能TIM的中断<br />
TIM_IT_Update TIM中断源<br />
TIM_IT_CC1：TIM捕获/比较1中断源<br />
TIM_IT_CC2：TIM捕获/比较2中断源<br />
TIM_IT_CC3：TIM捕获/比较3中断源<br />
TIM_IT_CC4：TIM捕获/比较4中断源<br />
TIM_IT_Trigger：TIM触发中断源<br />
</p>


<p>
10 函数TIM_DMAConfig<br />
</p>

<p>
功能描述：设置TIMx的DMA接口<br />
例：  <br />
TIM_DMAConfig(TIM2, TIM_DMABase_CCR1, TIM_DMABurstLength_1Byte)<br />
</p>

<p>
TIM_DMABase <br />
TIM_DMABase 设置DMA传输起始地址。<br />
TIM_DMABase_CR1：TIM CR1寄存器作为DMA传输起始<br />
TIM_DMABase_CR2：TIM CR2寄存器作为DMA传输起始<br />
TIM_DMABase_SMCR：TIM SMCR寄存器作为DMA传输起始<br />
TIM_DMABase_DIER：TIM DIER寄存器作为DMA传输起始<br />
TIM_DMABase_SR：TIM SR寄存器作为DMA传输起始<br />
TIM_DMABase_EGR：TIM EGR寄存器作为DMA传输起始<br />
TIM_DMABase_CCMR1：TIM CCMR1寄存器作为DMA传输起始<br />
TIM_DMABase_CCMR2：TIM CCMR2寄存器作为DMA传输起始<br />
TIM_DMABase_CCER：TIM CCER寄存器作为DMA传输起始<br />
TIM_DMABase_CNT：TIM CNT寄存器作为DMA传输起始<br />
TIM_DMABase_PSC：TIM PSC寄存器作为DMA传输起始<br />
TIM_DMABase_ARR：TIM APR寄存器作为DMA传输起始<br />
TIM_DMABase_CCR1：TIM CCR1寄存器作为DMA传输起始<br />
TIM_DMABase_CCR2：TIM CCR2寄存器作为DMA传输起始<br />
TIM_DMABase_CCR3：TIM CCR3寄存器作为DMA传输起始<br />
TIM_DMABase_CCR4：TIM CCR4寄存器作为DMA传输起始<br />
TIM_DMABase_DCR：TIM DCR寄存器作为DMA传输起始<br />
</p>

<p>
TIM_DMABurstLength <br />
TIM_DMABurstLength设置DMA连续传送长度。<br />
TIM_DMABurstLength_xByte：TIM DMA连续传送长度x字（1--18）<br />
</p>


<p>
11 函数TIM_DMACmd<br />
</p>

<p>
功能描述：使能或者失能指定的TIMx的DMA请求<br />
例： <br />
TIM_DMACmd(TIM2, TIM_DMA_CC1, ENABLE);<br />
</p>

<p>
TIM_DMASource <br />
输入参数TIM_DMASource使能或者失能TIM的中断。<br />
TIM_DMA_Update TIM更新DMA源<br />
TIM_DMA_CC1：TIM捕获/比较1DMA源<br />
TIM_DMA_CC2：TIM捕获/比较2DMA源<br />
TIM_DMA_CC3：TIM捕获/比较3DMA源<br />
TIM_DMA_CC4：TIM捕获/比较4DMA源<br />
TIM_DMA_Trigger：TIM触发DMA源<br />
</p>


<p>
12 函数TIM_InternalClockConfig<br />
</p>

<p>
功能描述：设置TIMx内部时钟<br />
例： <br />
TIM_InternalClockConfig(TIM2);<br />
</p>


<p>
13 函数TIM_ITRxExternalClockConfig<br />
功能描述：设置TIMx内部触发为外部时钟模式<br />
例： <br />
TIM_ITRxExternalClockConfig(TIM2, TIM_TS_ITR3);<br />
</p>

<p>
TIM_InputTriggerSource <br />
TIM_InputTriggerSource选择TIM输入触发。<br />
TIM_TS_ITRx：TIM内部触发x（0--3）<br />
</p>


<p>
14 函数TIM_TIxExternalClockConfig<br />
</p>


<p>
功能描述：设置TIMx触发为外部时钟<br />
例： <br />
TIM_TIxExternalClockConfig(TIM2, TIM_TS_TI1FP1, <br />
TIM_ICPolarity_Rising, 0);<br />
</p>

<p>
TIM_TIxExternalCLKSource <br />
TIM_TIxExternalCLKSource选择TIMx外部时钟源。<br />
TIM_TS_TI1FP1：TIM IC1连接到TI1 <br />
TIM_TS_TI1FP2：TIM IC2连接到TI2 <br />
TIM_TS_TI1F_ED：TIM IC1连接到TI1：使用边沿探测<br />
</p>


<p>
15 函数TIM_ETRClockMode1Config<br />
</p>

<p>
功能描述：配置TIMx外部时钟模式1<br />
例： <br />
TIM_ExternalCLK1Config(TIM2, TIM_ExtTRGPSC_DIV2, TIM_ExtTRGPolarity_NonInverted, 0x0);<br />
</p>

<p>
TIM_ExtTRGPrescaler <br />
TIM_ExtTRGPrescaler设置TIMx外部触发预分频。<br />
TIM_ExtTRGPSC_OFF：TIM ETRP 预分频 OFF <br />
TIM_ExtTRGPSC_DIV2：TIM ETRP频率除以2 <br />
TIM_ExtTRGPSC_DIV4：TIM ETRP频率除以4 <br />
TIM_ExtTRGPSC_DIV8：TIM ETRP频率除以8<br />
</p>

<p>
TIM_ExtTRGPolarity <br />
TIM_ExtTRGPolarity设置TIMx外部触发极性。<br />
TIM_ExtTRGPolarity_Inverted：TIM外部触发极性翻转：低电平或下降沿有效<br />
TIM_ExtTRGPolarity_NonInverted：TIM外部触发极性非翻转：高电平或上升沿有效<br />
</p>


<p>
16 函数TIM_ETRClockMode2Config<br />
</p>

<p>
功能描述：配置TIMx外部时钟模式2<br />
例： <br />
TIM_ExternalCLK2Config(TIM2, TIM_ExtTRGPSC_DIV2, <br />
TIM_ExtTRGPolarity_NonInverted, 0x0);<br />
</p>


<p>
17 函数TIM_ETRConfig<br />
功能描述：配置TIMx外部触发<br />
例： <br />
TIM_ExternalCLK2Config(TIM2, TIM_ExtTRGPSC_DIV2, <br />
TIM_ExtTRGPolarity_NonInverted, 0x0);<br />
</p>


<p>
18 函数TIM_SelectInputTrigger<br />
</p>

<p>
功能描述：选择TIMx输入触发源<br />
例： <br />
void TIM_SelectInputTrigger(TIM2, TIM_TS_ITR3);<br />
</p>

<p>
TIM_InputTriggerSource <br />
TIM_InputTriggerSource选择TIMx输入触发源。<br />
TIM_TS_ITR0：TIM内部触发0 <br />
TIM_TS_ITR1：TIM内部触发1 <br />
TIM_TS_ITR2：TIM内部触发2 <br />
TIM_TS_ITR3：TIM内部触发3 <br />
TIM_TS_TI1F_ED：TIM TL1 边沿探测器<br />
TIM_TS_TI1FP1：TIM经滤波定时器输入1 <br />
TIM_TS_TI2FP2：TIM经滤波定时器输入2 <br />
TIM_TS_ETRF：TIM外部触发输入<br />
</p>


<p>
19 函数TIM_PrescalerConfig<br />
功能描述：设置TIMx预分频<br />
例： <br />
u16 TIMPrescaler = 0xFF00; <br />
TIM_PrescalerConfig(TIM2, TIMPrescaler, TIM_PSCReloadMode_Immediate);<br />
</p>

<p>
TIM_PSCReloadMode <br />
TIM_PSCReloadMode选择预分频重载模式。<br />
TIM_PSCReloadMode_Update：TIM预分频值在更新事件装入<br />
TIM_PSCReloadMode_Immediate：TIM预分频值即时装入<br />
</p>


<p>
20 函数TIM_CounterModeConfig<br />
功能描述：设置TIMx计数器模式<br />
例： <br />
TIM_CounterModeConfig(TIM2, TIM_Counter_CenterAligned1);<br />
</p>


<p>
21 函数TIM_ForcedOC1Config<br />
</p>

<p>
功能描述：置TIMx输出1为活动或者非活动电平<br />
例： <br />
TIM_ForcedOC1Config(TIM2, TIM_ForcedAction_Active);<br />
</p>

<p>
TIM_ForcedAction<br />
输出信号的设置动作取值<br />
TIM_ForcedAction_Active：置为OCxREF上的活动电平<br />
TIM_ForcedAction_InActive：置为OCxREF上的非活动电平<br />
</p>


<p>
22 函数TIM_ForcedOC2Config<br />
</p>

<p>
功能描述：置TIMx输出2为活动或者非活动电平<br />
例： <br />
TIM_ForcedOC2Config(TIM2, TIM_ForcedAction_Active);<br />
</p>


<p>
23 函数TIM_ForcedOC3Config<br />
</p>

<p>
功能描述：置TIMx输出3为活动或者非活动电平<br />
例： <br />
TIM_ForcedOC3Config(TIM2, TIM_ForcedAction_Active);<br />
</p>


<p>
24 函数TIM_ForcedOC4Config<br />
</p>

<p>
功能描述：置TIMx输出4为活动或者非活动电平<br />
例： <br />
TIM_ForcedOC4Config(TIM2, TIM_ForcedAction_Active);<br />
</p>


<p>
25 函数TIM_ARRPreloadConfig<br />
</p>

<p>
功能描述：使能或者失能TIMx在ARR上的预装载寄存器<br />
例： <br />
TIM_ARRPreloadConfig(TIM2, ENABLE);<br />
</p>



<p>
26 函数TIM_SelectCCDMA<br />
</p>

<p>
功能描述：选择TIMx外设的捕获比较DMA源<br />
例： <br />
TIM_SelectCCDMA(TIM2, ENABLE);<br />
</p>


<p>
27 函数TIM_OC1PreloadConfig<br />
</p>

<p>
功能描述：使能或者失能TIMx在CCR1上的预装载寄存器<br />
例： <br />
TIM_OC1PreloadConfig(TIM2, TIM_OCPreload_Enable);<br />
</p>

<p>
TIM_OCPreload <br />
输出比较预装载状态可以使能或者失能<br />
TIM_OCPreload_Enable：TIMx在CCR1上的预装载寄存器使能<br />
TIM_OCPreload_Disable：TIMx在CCR1上的预装载寄存器失能<br />
</p>


<p>
28 函数TIM_OC2PreloadConfig<br />
</p>

<p>
功能描述：使能或者失能TIMx在CCR2上的预装载寄存器<br />
</p>

<p>
例： <br />
TIM_OC2PreloadConfig(TIM2, TIM_OCPreload_Enable);<br />
</p>


<p>
29 函数TIM_OC3PreloadConfig<br />
</p>

<p>
功能描述：使能或者失能TIMx在CCR3上的预装载寄存器<br />
例： <br />
TIM_OC3PreloadConfig(TIM2, TIM_OCPreload_Enable);<br />
</p>


<p>
30 函数TIM_OC4PreloadConfig<br />
</p>

<p>
功能描述：使能或者失能TIMx在CCR4上的预装载寄存器<br />
例： <br />
TIM_OC4PreloadConfig(TIM2, TIM_OCPreload_Enable);<br />
</p>


<p>
31 函数TIM_OC1FastConfig<br />
</p>

<p>
功能描述：设置TIMx捕获比较1快速特征<br />
例： <br />
TIM_OC1FastConfig(TIM2, TIM_OCFast_Enable);<br />
</p>

<p>
TIM_OCFast <br />
输出比较快速特征性能可以使能或者失能<br />
TIM_OCFast_Enable：TIMx输出比较快速特征性能使能<br />
TIM_OCFast_Disable：TIMx输出比较快速特征性能失能<br />
</p>



<p>
32 函数TIM_OC2FastConfig<br />
</p>

<p>
功能描述：设置TIMx捕获比较2快速特征<br />
例： <br />
TIM_OC2FastConfig(TIM2, TIM_OCFast_Enable);<br />
</p>


<p>
33 函数TIM_OC3FastConfig<br />
</p>

<p>
功能描述：设置TIMx捕获比较3快速特征<br />
例： <br />
TIM_OC3FastConfig(TIM2, TIM_OCFast_Enable);<br />
</p>



<p>
34 函数TIM_OC4FastConfig<br />
</p>

<p>
功能描述：设置TIMx捕获比较4快速特征<br />
例： <br />
TIM_OC4FastConfig(TIM2, TIM_OCFast_Enable);<br />
</p>


<p>
35 函数TIM_ClearOC1Ref<br />
</p>

<p>
功能描述：在一个外部事件时清除或者保持OCREF1信号<br />
例： <br />
TIM_ClearOC1Ref(TIM2, TIM_OCClear_Enable);<br />
</p>

<p>
TIM_OCClear <br />
输出比较清除使能位的值<br />
TIM_OCClear_Enable：TIMx输出比较清除使能<br />
TIM_OCClear_Disable：TIMx输出比较清除失能<br />
</p>


<p>
36 函数TIM_ClearOC2Ref<br />
</p>

<p>
功能描述：在一个外部事件时清除或者保持OCREF2信号<br />
例： <br />
TIM_ClearOC2Ref(TIM2, TIM_OCClear_Enable);<br />
</p>


<p>
37 函数TIM_ClearOC3Ref<br />
</p>

<p>
功能描述：在一个外部事件时清除或者保持OCREF3信号<br />
例： <br />
TIM_ClearOC3Ref(TIM2, TIM_OCClear_Enable);<br />
</p>


<p>
38 函数TIM_ClearOC4Ref<br />
</p>

<p>
功能描述：在一个外部事件时清除或者保持OCREF4信号<br />
例： <br />
TIM_ClearOC4Ref(TIM2, TIM_OCClear_Enable);<br />
</p>


<p>
39 函数TIM_UpdateDisableConfig<br />
功能描述：使能或者失能TIMx更新事件<br />
例： <br />
TIM_UpdateDisableConfig(TIM2, DISABLE);<br />
</p>


<p>
40 函数TIM_EncoderInterfaceConfig<br />
功能描述：设置TIMx编码界面<br />
例： <br />
TIM_EncoderInterfaceConfig(TIM2, TIM_EncoderMode_TI1, TIM_ICPolarity_Rising, TIM_ICPolarity_Rising);<br />
</p>

<p>
TIM_EncoderMode <br />
TIM_EncoderMode选择TIMx编码模式。<br />
TIM_EncoderMode_TI1 使用TIM编码模式1 <br />
TIM_EncoderMode_TI1 使用TIM编码模式2 <br />
TIM_EncoderMode_TI12 使用TIM编码模式3<br />
</p>


<p>
41 函数TIM_GenerateEvent<br />
</p>

<p>
功能描述：设置TIMx事件由软件产生<br />
例： <br />
TIM_GenerateEvent(TIM2, TIM_EventSource_Trigger);<br />
</p>

<p>
TIM_EventSource <br />
TIM_EventSource选择TIM软件事件源。<br />
TIM_EventSource_Update：TIM更新事件源<br />
TIM_EventSource_CC1：TIM捕获比较1事件源<br />
TIM_EventSource_CC2：TIM捕获比较2事件源<br />
TIM_EventSource_CC3：TIM捕获比较3事件源<br />
TIM_EventSource_CC4：TIM捕获比较4事件源<br />
TIM_EventSource_Trigger：TIM触发事件源<br />
</p>


<p>
42 函数TIM_OC1PolarityConfig<br />
</p>

<p>
功能描述：设置TIMx通道1极性<br />
例： <br />
TIM_OC1PolarityConfig(TIM2, TIM_OCPolarity_High);<br />
</p>


<p>
43 函数TIM_OC2PolarityConfig<br />
</p>

<p>
功能描述：设置TIMx通道2极性<br />
例： <br />
TIM_OC2PolarityConfig(TIM2, TIM_OCPolarity_High); <br />
</p>


<p>
44 函数TIM_OC3PolarityConfig<br />
</p>

<p>
功能描述：设置TIMx通道3极性<br />
例： <br />
TIM_OC3PolarityConfig(TIM2, TIM_OCPolarity_High);<br />
</p>


<p>
45 函数TIM_OC4PolarityConfig<br />
</p>

<p>
功能描述：设置TIMx通道4极性<br />
例： <br />
TIM_OC4PolarityConfig(TIM2, TIM_OCPolarity_High);<br />
</p>


<p>
46 函数TIM_UpdateRequestConfig<br />
</p>

<p>
功能描述：设置TIMx更新请求源<br />
例： <br />
TIM_UpdateRequestConfig(TIM2, TIM_UpdateSource_Regular);<br />
</p>

<p>
TIM_UpdateSource <br />
TIM_UpdateSource选择TIM更新源。<br />
TIM_UpdateSource_Global：生成重复的脉冲：在更新事件时计数器不停止 <br />
TIM_UpdateSource_Regular：生成单一的脉冲：计数器在下一个更新事件停止<br />
</p>


<p>
47 函数TIM_SelectHallSensor<br />
</p>

<p>
功能描述：使能或者失能TIMx霍尔传感器接口<br />
例： <br />
TIM_SelectHallSensor(TIM2, ENABLE);<br />
</p>


<p>
48 函数TIM_SelectOnePulseMode<br />
</p>

<p>
功能描述：设置TIMx单脉冲模式<br />
例： <br />
TIM_SelectOnePulseMode(TIM2, TIM_OPMode_Single);<br />
</p>

<p>
TIM_OPMode <br />
TIM_OPMode选择TIM更新源。<br />
TIM_OPMode_Repetitive：生成重复的脉冲：在更新事件时计数器不停止 <br />
TIM_OPMode_Single：生成单一的脉冲：计数器在下一个更新事件停止<br />
</p>


<p>
49 函数TIM_SelectOutputTrigger<br />
</p>

<p>
功能描述：选择TIMx触发输出模式<br />
例： <br />
TIM_SelectOutputTrigger(TIM2, TIM_TRGOSource_Update);<br />
</p>

<p>
TIM_TRGOSource <br />
TIM_TRGOSource选择TIM触发输出源。<br />
TIM_TRGOSource_Reset： 使用寄存器TIM_EGR的UG位作为触发输出（TRGO） <br />
TIM_TRGOSource_Enable：使用计数器使能CEN作为触发输出（TRGO） <br />
TIM_TRGOSource_Update：使用更新事件作为触发输出（TRGO） <br />
TIM_TRGOSource_OC1：一旦捕获或者比较匹配发生，当标志位CC1F被设置时触发输出发送一个肯定脉冲（TRGO） <br />
TIM_TRGOSource_OC1Ref 使用OC1REF作为触发输出（TRGO） <br />
TIM_TRGOSource_OC2Ref：使用OC2REF作为触发输出（TRGO） <br />
TIM_TRGOSource_OC3Ref：使用OC3REF作为触发输出（TRGO） <br />
TIM_TRGOSource_OC4Ref：使用OC4REF作为触发输出（TRGO）<br />
</p>


<p>
50 函数TIM_SelectSlaveMode<br />
</p>

<p>
功能描述：选择TIMx从模式<br />
例： <br />
TIM_SelectSlaveMode(TIM2, TIM_SlaveMode_Gated);<br />
</p>

<p>
TIM_SlaveMode <br />
TIM_SlaveMode选择TIM从模式。<br />
TIM_SlaveMode_Reset：选中触发信号（TRGI）的上升沿重初始化计数器并触发寄存器的更新<br />
TIM_SlaveMode_Gated：当触发信号（TRGI）为高电平计数器时钟使能<br />
TIM_SlaveMode_Trigger：计数器在触发（TRGI）的上升沿开始<br />
TIM_SlaveMode_External1：选中触发（TRGI）的上升沿作为计数器时钟<br />
</p>


<p>
51 函数TIM_SelectMasterSlaveMode<br />
功能描述：设置或者重置TIMx主/从模式<br />
例： <br />
TIM_SelectMasterSlaveMode(TIM2, TIM_MasterSlaveMode_Enable);<br />
</p>

<p>
TIM_MasterSlaveMode <br />
TIM_MasterSlaveMode选择TIM主/从模式。见Table 543. 参阅该参数的取值。<br />
TIM_MasterSlaveMode_Enable：TIM主/从模式使能<br />
TIM_MasterSlaveMode_Disable：TIM主/从模式失能<br />
</p>



<p>
52 函数TIM_SetCounter<br />
</p>

<p>
功能描述：设置TIMx计数器寄存器值<br />
例： <br />
u16 TIMCounter = 0xFFFF; <br />
TIM_SetCounter(TIM2, TIMCounter);<br />
</p>


<p>
53 函数TIM_SetAutoreload<br />
</p>

<p>
功能描述：设置TIMx自动重装载寄存器值<br />
例： <br />
u16 TIMAutoreload = 0xFFFF; <br />
TIM_SetAutoreload(TIM2, TIMAutoreload);<br />
</p>


<p>
54 函数TIM_SetCompare1<br />
</p>

<p>
功能描述：设置TIMx捕获比较1寄存器值<br />
例： <br />
u16 TIMCompare1 = 0x7FFF; <br />
TIM_SetCompare1(TIM2, TIMCompare1);<br />
</p>


<p>
55 函数TIM_SetCompare2<br />
</p>

<p>
功能描述：设置TIMx捕获比较2寄存器值<br />
例： <br />
u16 TIMCompare2 = 0x7FFF; <br />
TIM_SetCompare2(TIM2, TIMCompare2);<br />
</p>


<p>
56 函数TIM_SetCompare3<br />
</p>

<p>
功能描述：设置TIMx捕获比较3寄存器值<br />
例： <br />
u16 TIMCompare3 = 0x7FFF; <br />
TIM_SetCompare3(TIM2, TIMCompare3);<br />
</p>


<p>
57 函数TIM_SetCompare4<br />
</p>

<p>
功能描述：设置TIMx捕获比较4寄存器值<br />
例： <br />
u16 TIMCompare4 = 0x7FFF; <br />
TIM_SetCompare4(TIM2, TIMCompare4);<br />
</p>


<p>
58 函数TIM_SetIC1Prescaler<br />
</p>

<p>
功能描述：设置TIMx输入捕获1预分频<br />
例： <br />
TIM_SetIC1Prescaler(TIM2, TIM_ICPSC_Div2);<br />
</p>


<p>
59 函数TIM_SetIC2Prescaler<br />
</p>

<p>
功能描述：设置TIMx输入捕获2预分频<br />
例： <br />
TIM_SetIC2Prescaler(TIM2, TIM_ICPSC_Div2);<br />
</p>


<p>
60 函数TIM_SetIC3Prescaler<br />
</p>

<p>
功能描述：设置TIMx输入捕获3预分频<br />
例： <br />
TIM_SetIC3Prescaler(TIM2, TIM_ICPSC_Div2);<br />
</p>


<p>
61 函数TIM_SetIC4Prescaler<br />
</p>

<p>
功能描述：设置TIMx输入捕获4预分频<br />
例： <br />
TIM_SetIC4Prescaler(TIM2, TIM_ICPSC_Div2);<br />
</p>


<p>
62 函数TIM_SetClockDivision<br />
</p>

<p>
功能描述：设置TIMx的时钟分割值<br />
例： <br />
TIM_SetClockDivision(TIM2, TIM_CKD_DIV4);<br />
</p>


<p>
63 函数TIM_GetCapture1<br />
</p>

<p>
功能描述：获得TIMx输入捕获1的值<br />
例： <br />
u16 ICAP1value = TIM_GetCapture1(TIM2);<br />
</p>


<p>
64 函数TIM_GetCapture2<br />
</p>

<p>
功能描述：获得TIMx输入捕获2的值<br />
例： <br />
u16 ICAP2value = TIM_GetCapture2(TIM2);<br />
</p>


<p>
65 函数TIM_GetCapture3<br />
</p>

<p>
功能描述：获得TIMx输入捕获3的值<br />
例： <br />
u16 ICAP3value = TIM_GetCapture3(TIM2);<br />
</p>

<p>
66 函数TIM_GetCapture4<br />
</p>

<p>
功能描述：获得TIMx输入捕获4的值<br />
例： <br />
u16 ICAP4value = TIM_GetCapture4(TIM2);<br />
</p>


<p>
67 函数TIM_GetCounter<br />
</p>

<p>
功能描述：获得TIMx计数器的值<br />
例： <br />
u16 TIMCounter = TIM_GetCounter(TIM2);<br />
</p>


<p>
68 函数TIM_GetPrescaler<br />
</p>

<p>
功能描述：获得TIMx预分频值<br />
例： <br />
u16 TIMPrescaler = TIM_GetPrescaler(TIM2);<br />
</p>


<p>
69 函数TIM_GetFlagStatus<br />
</p>

<p>
功能描述：检查指定的TIM标志位设置与否<br />
例： <br />
if(TIM_GetFlagStatus(TIM2, TIM_FLAG_CC1) == SET) <br />
{<br />
}<br />
</p>

<p>
TIM_FLAG值<br />
TIM_FLAG_Update TIM更新标志位<br />
TIM_FLAG_CC1：TIM捕获/比较1标志位<br />
TIM_FLAG_CC2：TIM捕获/比较2标志位<br />
TIM_FLAG_CC3：TIM捕获/比较3标志位<br />
TIM_FLAG_CC4：TIM捕获/比较4标志位<br />
TIM_FLAG_Trigger：TIM触发标志位<br />
TIM_FLAG_CC1OF：TIM捕获/比较1溢出标志位<br />
TIM_FLAG_CC2OF：TIM捕获/比较2溢出标志位<br />
TIM_FLAG_CC3OF：TIM捕获/比较3溢出标志位<br />
TIM_FLAG_CC4OF：TIM捕获/比较4溢出标志位<br />
</p>


<p>
70 函数TIM_ClearFlag<br />
</p>

<p>
功能描述：清除TIMx的待处理标志位<br />
例： <br />
TIM_ClearFlag(TIM2, TIM_FLAG_CC1);<br />
</p>


<p>
71 函数TIM_GetITStatus<br />
功能描述：检查指定的TIM中断发生与否<br />
例： <br />
if(TIM_GetITStatus(TIM2, TIM_IT_CC1) == SET) <br />
{ <br />
}<br />
</p>


<p>
72 函数TIM_ClearITPendingBit<br />
</p>

<p>
功能描述：清除TIMx的中断待处理位<br />
例： <br />
TIM_ClearITPendingBit(TIM2, TIM_IT_CC1);<br />
</p>





<p>
四：ADC寄存器<br />
</p>




<p>
ADC配置规则<br />
</p>

<p>
void ADC_Config(void)<br />
{<br />
定义ADC初始化结构体变量  // ADC_Init();<br />
ADC1和ADC2工作模式<br />
使能扫描<br />
ADC转换工作模式<br />
由软件控制转换<br />
转换数据右对齐<br />
设置转换通道<br />
初始化ADC  // ADC_Init();<br />
ADC1选择信道、音序器等级、采样时间<br />
使能ADC1模块DMA<br />
使能ADC1<br />
重置ADC1校准寄存器<br />
等待ADC1校准重置完成<br />
开始ADC1校准<br />
等待ADC1校准完成<br />
使能ADC1软件开始转换<br />
}<br />
</p>




<p>
ADC寄存器结构<br />
</p>

<p>
ADC_TypeDef，定义于文件“stm32f10x_map.h”如下： <br />
typedef struct <br />
{ <br />
vu32 SR; <br />
vu32 CR1; <br />
vu32 CR2;<br />
vu32 SMPR1; <br />
vu32 SMPR2;<br />
vu32 JOFR1; <br />
vu32 JOFR2; <br />
vu32 JOFR3; <br />
vu32 JOFR4; <br />
vu32 HTR; <br />
vu32 LTR; <br />
vu32 SQR1; <br />
vu32 SQR2; <br />
vu32 SQR3; <br />
vu32 JSQR; <br />
vu32 JDR1; <br />
vu32 JDR2;<br />
vu32 JDR3; <br />
vu32 JDR4; <br />
vu32 DR; <br />
} <br />
ADC_TypeDef;<br />
</p>




<p>
ADC库函数<br />
</p>


<p>
1、ADC_DeInit();<br />
功能描述：将外设ADCx的全部寄存器重设为缺省值<br />
例：<br />
ADC_DeInit(ADC2);<br />
</p>


<p>
2、ADC_Init();<br />
</p>

<p>
功能描述：根据ADC_InitStruct中指定的参数初始化外设ADCx的寄存器<br />
例：<br />
{<br />
ADC_InitTypeDef ADC_InitStructure; <br />
ADC_InitStructure.ADC_Mode = ADC_Mode_Independent; <br />
ADC_InitStructure.ADC_ScanConvMode = ENABLE; <br />
ADC_InitStructure.ADC_ContinuousConvMode = DISABLE; <br />
ADC_InitStructure.ADC_ExternalTrigConv = ADC_ExternalTrigConv_Ext_IT11; <br />
ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right; <br />
ADC_InitStructure.ADC_NbrOfChannel = 16; <br />
ADC_Init(ADC1, &amp;ADC_InitStructure);<br />
}<br />
</p>

<p>
ADC_InitStruct：指向结构ADC_InitTypeDef的指针，包含了指定外设ADC的配置信息<br />
</p>

<p>
ADC_InitTypeDef：<br />
typedef struct <br />
{ <br />
u32 ADC_Mode; <br />
FunctionalState ADC_ScanConvMode; <br />
FunctionalState ADC_ContinuousConvMode; <br />
u32 ADC_ExternalTrigConv; <br />
u32 ADC_DataAlign; <br />
u8 ADC_NbrOfChannel; <br />
} <br />
ADC_InitTypeDef<br />
</p>

<p>
ADC_Mode：<br />
ADC_Mode_Independent：ADC1和ADC2工作在独立模式<br />
ADC_Mode_RegInjecSimult：ADC1和ADC2工作在同步规则和同步注入模式<br />
ADC_Mode_RegSimult_AlterTrig：ADC1和ADC2工作在同步规则模式和交替触发模式<br />
ADC_Mode_InjecSimult_FastInterl：ADC1和ADC2工作在同步规则模式和快速交替模式<br />
ADC_Mode_InjecSimult_SlowInterl：ADC1和ADC2工作在同步注入模式和慢速交替模式<br />
ADC_Mode_InjecSimult：ADC1和ADC2工作在同步注入模式<br />
ADC_Mode_RegSimult：ADC1和ADC2工作在同步规则模式<br />
ADC_Mode_FastInterl：ADC1和ADC2工作在快速交替模式<br />
ADC_Mode_SlowInterl：ADC1和ADC2工作在慢速交替模式<br />
ADC_Mode_AlterTrig：ADC1和ADC2工作在交替触发模式<br />
例：<br />
ADC_InitStructure.ADC_Mode = ADC_Mode_Independent; <br />
</p>

<p>
ADC_ScanConvMode：<br />
ADC_ScanConvMode规定了模数转换工作在扫描模式（多通道）还是单次（单通道）模式。可以设置这个参数为ENABLE或者DISABLE。<br />
例：<br />
ADC_InitStructure.ADC_ScanConvMode = ENABLE; <br />
</p>

<p>
ADC_ContinuousConvMode：<br />
ADC_ContinuousConvMode规定了模数转换工作在连续还是单次模式。可以设置这个参数为ENABLE或者DISABLE。<br />
例：<br />
ADC_InitStructure.ADC_ContinuousConvMode = DISABLE; <br />
</p>

<p>
ADC_ExternalTrigConv：<br />
ADC_ExternalTrigConv_T1_CC1：选择定时器1的捕获比较1作为转换外部触发<br />
ADC_ExternalTrigConv_T1_CC2：选择定时器1的捕获比较2作为转换外部触发<br />
ADC_ExternalTrigConv_T1_CC3：选择定时器1的捕获比较3作为转换外部触发<br />
ADC_ExternalTrigConv_T2_CC2：选择定时器2的捕获比较2作为转换外部触发<br />
ADC_ExternalTrigConv_T3_TRGO：选择定时器3的TRGO作为转换外部触发<br />
ADC_ExternalTrigConv_T4_CC4：选择定时器4的捕获比较4作为转换外部触发<br />
ADC_ExternalTrigConv_Ext_IT11：选择外部中断线11事件作为转换外部触发<br />
ADC_ExternalTrigConv_None：转换由软件而不是外部触发启动<br />
例：<br />
ADC_InitStructure.ADC_ExternalTrigConv = ADC_ExternalTrigConv_Ext_IT11; <br />
</p>

<p>
ADC_DataAlign：<br />
ADC_DataAlign_Right：ADC数据右对齐<br />
ADC_DataAlign_Left：ADC数据左对齐<br />
例：<br />
ADC_InitStructure.ADC_DataAlign = ADC_DataAlign_Right; <br />
</p>

<p>
ADC_NbrOfChannel：<br />
ADC_NbreOfChannel 规定了顺序进行规则转换的ADC通道的数目。这个数目的取值范围是1到16。<br />
例：<br />
ADC_InitStructure.ADC_NbrOfChannel = 16;<br />
</p>


<p>
3 函数ADC_StructInit();<br />
</p>

<p>
功能描述：把ADC_InitStruct中的每一个参数按缺省值填入，如下：<br />
ADC_Mode：ADC_Mode_Independent <br />
ADC_ScanConvMode：DISABLE <br />
ADC_ContinuousConvMode：DISABLE <br />
ADC_ExternalTrigConv：ADC_ExternalTrigConv_T1_CC1 <br />
ADC_DataAlign：ADC_DataAlign_Right <br />
ADC_NbrOfChannel：1<br />
例：<br />
ADC_InitTypeDef ADC_InitStructure;<br />
ADC_StructInit(&amp;ADC_InitStructure);<br />
</p>


<p>
4 函数ADC_Cmd();<br />
</p>

<p>
功能描述：使能或者失能指定的ADC<br />
例： <br />
ADC_Cmd(ADC1, ENABLE);<br />
</p>


<p>
5 函数ADC_DMACmd();<br />
</p>

<p>
功能描述：使能或者失能指定的ADC的DMA请求<br />
例：<br />
ADC_DMACmd(ADC2, ENABLE);<br />
</p>


<p>
6 函数ADC_ITConfig();<br />
</p>

<p>
功能描述：使能或者失能指定的ADC的中断<br />
例：<br />
ADC_ITConfig(ADC2, ADC_IT_EOC | ADC_IT_AWD, ENABLE);<br />
</p>

<p>
ADC_IT：<br />
ADC_IT可以用来使能或者失能ADC中断。可以使用下表中的一个参数，或者他们的组合。<br />
ADC_IT_EOC EOC：中断屏蔽<br />
ADC_IT_AWD AWDOG：中断屏蔽<br />
ADC_IT_JEOC JEOC：中断屏蔽<br />
</p>


<p>
7 函数ADC_ResetCalibration();<br />
</p>

<p>
功能描述：重置指定的ADC的校准寄存器<br />
例：<br />
ADC_ResetCalibration(ADC1);<br />
</p>


<p>
8 函数ADC_GetResetCalibrationStatus();<br />
</p>

<p>
功能描述：获取ADC重置校准寄存器的状态<br />
例：<br />
FlagStatus Status; <br />
Status = ADC_GetResetCalibrationStatus(ADC2);<br />
</p>


<p>
9 函数ADC_StartCalibration();<br />
</p>

<p>
功能描述：开始指定ADC的校准状态<br />
例：<br />
ADC_StartCalibration(ADC2);<br />
</p>


<p>
10 函数ADC_GetCalibrationStatus();<br />
</p>

<p>
功能描述：获取指定ADC的校准程序<br />
例：<br />
FlagStatus Status; <br />
Status = ADC_GetCalibrationStatus(ADC2);<br />
</p>


<p>
11 函数ADC_SoftwareStartConvCmd();<br />
</p>

<p>
功能描述：使能或者失能指定的ADC的软件转换启动功能<br />
例：<br />
ADC_SoftwareStartConvCmd(ADC1, ENABLE);<br />
</p>


<p>
12 函数ADC_GetSoftwareStartConvStatus();<br />
</p>

<p>
功能描述：获取ADC软件转换启动状态<br />
例：<br />
FlagStatus Status; Status = ADC_GetSoftwareStartConvStatus(ADC1);<br />
</p>


<p>
13 函数ADC_DiscModeChannelCountConfig();<br />
</p>

<p>
功能描述：对ADC规则组通道配置间断模式<br />
例：<br />
ADC_DiscModeChannelCountConfig(ADC1, 2);<br />
</p>


<p>
14 函数ADC_DiscModeCmd();<br />
</p>

<p>
功能描述：使能或者失能指定的ADC规则组通道的间断模式<br />
例：<br />
ADC_DiscModeCmd(ADC1, ENABLE);<br />
</p>


<p>
15 函数ADC_RegularChannelConfig();<br />
</p>

<p>
功能描述：设置指定ADC的规则组通道，设置它们的转化顺序和采样时间<br />
例：<br />
ADC_RegularChannelConfig(ADC1, ADC_Channel_2, 1, ADC_SampleTime_7Cycles5);<br />
ADC_RegularChannelConfig(ADC1, ADC_Channel_8, 2, ADC_SampleTime_1Cycles5);<br />
</p>

<p>
ADC_Channel 参数ADC_Channel指定了通过调用函数ADC_RegularChannelConfig来设置的ADC通道。<br />
ADC_Channel_0：选择ADC通道0 <br />
ADC_Channel_1：选择ADC通道1 <br />
ADC_Channel_2：选择ADC通道2 <br />
ADC_Channel_3：选择ADC通道3 <br />
ADC_Channel_4：选择ADC通道4 <br />
ADC_Channel_5：选择ADC通道5<br />
ADC_Channel_6：选择ADC通道6 <br />
ADC_Channel_7：选择ADC通道7 <br />
ADC_Channel_8：选择ADC通道8 <br />
ADC_Channel_9：选择ADC通道9 <br />
ADC_Channel_10：选择ADC通道10 <br />
ADC_Channel_11：选择ADC通道11 <br />
ADC_Channel_12：选择ADC通道12 <br />
ADC_Channel_13：选择ADC通道13 <br />
ADC_Channel_14：选择ADC通道14 <br />
ADC_Channel_15：选择ADC通道15 <br />
ADC_Channel_16：选择ADC通道16 <br />
ADC_Channel_17：选择ADC通道17<br />
</p>

<p>
ADC_SampleTime <br />
ADC_SampleTime设定了选中通道的ADC采样时间。<br />
ADC_SampleTime_1Cycles5：采样时间为1.5周期<br />
ADC_SampleTime_7Cycles5：采样时间为7.5周期<br />
ADC_SampleTime_13Cycles5：采样时间为13.5周期<br />
ADC_SampleTime_28Cycles5：采样时间为28.5周期<br />
ADC_SampleTime_41Cycles5：采样时间为41.5周期<br />
ADC_SampleTime_55Cycles5：采样时间为55.5周期<br />
ADC_SampleTime_71Cycles5：采样时间为71.5周期<br />
ADC_SampleTime_239Cycles5：采样时间为239.5周期<br />
</p>


<p>
16 函数ADC_ExternalTrigConvConfig();<br />
</p>

<p>
功能描述：使能或者失能ADCx的经外部触发启动转换功能<br />
例：<br />
ADC_ExternalTrigConvCmd(ADC1, ENABLE);<br />
</p>


<p>
17 函数ADC_GetConversionValue();<br />
功能描述：返回最近一次ADCx规则组的转换结果<br />
例： <br />
u16 DataValue; <br />
DataValue = ADC_GetConversionValue(ADC1);<br />
</p>


<p>
18 函数ADC_GetDuelModeConversionValue();<br />
功能描述：返回最近一次双ADC模式下的转换结果<br />
例：<br />
u32 DataValue; <br />
DataValue = ADC_GetDualModeConversionValue();<br />
</p>


<p>
19 函数ADC_AutoInjectedConvCmd();<br />
</p>

<p>
功能描述：使能或者失能指定ADC在规则组转化后自动开始注入组转换<br />
例：<br />
ADC_AutoInjectedConvCmd(ADC2, ENABLE);<br />
</p>


<p>
20 函数ADC_InjectedDiscModeCmd();<br />
</p>

<p>
功能描述：使能或者失能指定ADC的注入组间断模式<br />
例：<br />
ADC_InjectedDiscModeCmd(ADC2, ENABLE);<br />
</p>


<p>
21 函数ADC_ExternalTrigInjectedConvConfig();<br />
</p>

<p>
功能描述：配置ADCx的外部触发启动注入组转换功能<br />
例：<br />
ADC_ExternalTrigInjectedConvConfig(ADC1, <br />
ADC_ExternalTrigConv_T1_CC4);<br />
</p>

<p>
ADC_ExternalTrigInjectedConv <br />
ADC_ExternalTrigInjectedConv指定了所使用的注入转换启动触发。<br />
ADC_ExternalTrigInjecConv_T1_TRGO：选择定时器1的TRGO作为注入转换外部触发<br />
ADC_ExternalTrigInjecConv_T1_CC4：选择定时器1的捕获比较4作为注入转换外部触发<br />
ADC_ExternalTrigInjecConv_T2_TRGO：选择定时器2的TRGO作为注入转换外部触发<br />
ADC_ExternalTrigInjecConv_T2_CC1：选择定时器2的捕获比较1作为注入转换外部触发<br />
ADC_ExternalTrigInjecConv_T3_CC4：选择定时器3的捕获比较4作为注入转换外部触发<br />
ADC_ExternalTrigInjecConv_T4_TRGO：选择定时器4的TRGO作为注入转换外部触发<br />
ADC_ExternalTrigInjecConv_Ext_IT15：选择外部中断线15事件作为注入转换外部触发<br />
ADC_ExternalTrigInjecConv_None：注入转换由软件而不是外部触发启动<br />
</p>


<p>
22 函数ADC_ExternalTrigInjectedConvCmd();<br />
</p>

<p>
功能描述：使能或者失能ADCx的经外部触发启动注入组转换功能<br />
例：<br />
ADC_ExternalTrigInjectedConvCmd(ADC1, ENABLE);<br />
</p>


<p>
23 函数ADC_SoftwareStartinjectedConvCmd();<br />
</p>

<p>
功能描述：使能或者失能ADCx软件启动注入组转换功能<br />
例： <br />
ADC_SoftwareStartInjectedConvCmd(ADC2, ENABLE);<br />
</p>


<p>
24 函数ADC_GetsoftwareStartinjectedConvStatus();<br />
</p>

<p>
功能描述：获取指定ADC的软件启动注入组转换状态<br />
例： <br />
FlagStatus Status; Status = ADC_GetSoftwareStartInjectedConvStatus(ADC1);<br />
</p>


<p>
25 函数ADC_InjectedChannleConfig();<br />
</p>

<p>
功能描述：设置指定ADC的注入组通道，设置它们的转化顺序和采样时间<br />
例： <br />
ADC_InjectedChannelConfig(ADC1, ADC_Channel_12, 2, ADC_SampleTime_28Cycles5); <br />
ADC_InjectedChannelConfig(ADC2, ADC_Channel_4, 11, ADC_SampleTime_71Cycles5);<br />
</p>


<p>
26 函数ADC_InjectedSequencerLengthConfig();<br />
</p>

<p>
功能描述：设置注入组通道的转换序列长度<br />
例：<br />
ADC_InjectedSequencerLengthConfig(ADC1, 4);<br />
</p>


<p>
27 函数ADC_SetinjectedOffset();<br />
</p>

<p>
功能描述：设置注入组通道的转换偏移值<br />
例： <br />
ADC_SetInjectedOffset(ADC1, ADC_InjectedChannel_3, 0x100);<br />
</p>

<p>
ADC_InjectedChannel <br />
参数ADC_InjectedChannel指定了必须设置转换偏移值的ADC通道。<br />
ADC_InjectedChannel_1：选择注入通道1 ADC_InjectedChannel_2 选择注入通道2 <br />
ADC_InjectedChannel_3：选择注入通道3 ADC_InjectedChannel_4 选择注入通道4<br />
</p>


<p>
28 函数ADC_GetInjectedConversionValue();<br />
</p>

<p>
功能描述：返回ADC指定注入通道的转换结果<br />
例： <br />
u16InjectedDataValue;InjectedDataValue=ADC_GetInjectedConversionValue(ADC1,ADC_InjectedChannel_1);<br />
</p>


<p>
29 函数ADC_AnalogWatchdogCmd();<br />
</p>

<p>
功能描述：使能或者失能指定单个/全体，规则/注入组通道上的模拟看门狗<br />
例：<br />
ADC_AnalogWatchdogCmd(ADC2, ADC_AnalogWatchdog_AllRegAllInjecEnable);<br />
</p>


<p>
30 函数ADC_AnalogWatchdongThresholdsConfig();<br />
</p>

<p>
功能描述：设置模拟看门狗的高/低阈值<br />
例：<br />
ADC_AnalogWatchdogThresholdsConfig(ADC1, 0x400, 0x100);<br />
</p>


<p>
31 函数ADC_AnalogWatchdongSingleChannelConfig();<br />
</p>

<p>
功能描述：对单个ADC通道设置模拟看门狗<br />
例：<br />
ADC_AnalogWatchdogSingleChannelConfig(ADC1, ADC_Channel_1);<br />
</p>


<p>
32 函数ADC_TampSensorVrefintCmd();<br />
</p>

<p>
功能描述：使能或者失能温度传感器和内部参考电压通道<br />
例：<br />
ADC_TempSensorVrefintCmd(ENABLE);<br />
</p>


<p>
33 函数ADC_GetFlagStatus();<br />
</p>

<p>
功能描述：检查制定ADC标志位置1与否<br />
例：<br />
FlagStatus Status; Status = ADC_GetFlagStatus(ADC1, ADC_FLAG_EOC);<br />
</p>

<p>
ADC_FLAG<br />
ADC_FLAG_AWD 模拟看门狗标志位 ADC_FLAG_EOC 转换结束标志位 ADC_FLAG_JEOC 注入组转换结束标志位 ADC_FLAG_JSTRT 注入组转换开始标志位 ADC_FLAG_STRT 规则组转换开始标志位<br />
</p>


<p>
34 函数ADC_ClearFlag();<br />
</p>

<p>
功能描述：清除ADCx的待处理标志位<br />
例：<br />
ADC_ClearFlag(ADC2, ADC_FLAG_STRT);<br />
</p>


<p>
35 函数ADC_GetITStatus();<br />
</p>

<p>
功能描述：检查指定的ADC中断是否发生<br />
例：<br />
ITStatus Status; Status = ADC_GetITStatus(ADC1, ADC_IT_AWD);<br />
</p>


<p>
36 函数ADC_ClearITPendingBit();<br />
</p>

<p>
功能描述：清除ADCx的中断待处理位<br />
例： <br />
ADC_ClearITPendingBit(ADC2, ADC_IT_JEOC);<br />
</p>









<p>
五：备份寄存器（BKP）<br />
</p>




<p>
BKP寄存器结构<br />
</p>

<p>
BKP_TypeDef，在文件“stm32f10x_map.h”中定义如下： <br />
typedef struct <br />
{ <br />
u32 RESERVED0; <br />
vu16 DR1; <br />
u16 RESERVED1; <br />
vu16 DR2; <br />
u16 RESERVED2; <br />
vu16 DR3; <br />
u16 RESERVED3; <br />
vu16 DR4; <br />
u16 RESERVED4; <br />
vu16 DR5; <br />
u16 RESERVED5; <br />
vu16 DR6; <br />
u16 RESERVED6; <br />
vu16 DR7; <br />
u16 RESERVED7; <br />
vu16 DR8; <br />
u16 RESERVED8; <br />
vu16 DR9; <br />
u16 RESERVED9; <br />
vu16 DR10; <br />
u16 RESERVED10; <br />
vu16 RTCCR; <br />
u16 RESERVED11; <br />
vu16 CR; <br />
u16 RESERVED12; <br />
vu16 CSR; <br />
u16 RESERVED13; <br />
} <br />
BKP_TypeDef;<br />
</p>




<p>
BKP库函数<br />
</p>


<p>
1 函数BKP_DeInit();<br />
</p>

<p>
功能描述：将外设BKP的全部寄存器重设为缺省值<br />
例：<br />
BKP_DeInit();<br />
</p>


<p>
2 函数BKP_TamperPinLevelConfig();<br />
</p>

<p>
功能描述：设置侵入检测管脚的有效电平<br />
例：<br />
BKP_TamperPinLevelConfig(BKP_TamperPinLevel_High);<br />
</p>

<p>
BKP_TamperPinLevel <br />
参数BKP_TamperPinLevel指定了侵入检测管脚的有效电平。<br />
BKP_TamperPinLevel_High：侵入检测管脚高电平有效 <br />
BKP_TamperPinLevel_Low：侵入检测管脚低电平有效<br />
</p>


<p>
3 函数BKP_TamperPinCmd();<br />
</p>

<p>
功能描述：使能或者失能管脚的侵入检测功能<br />
例：<br />
BKP_TamperPinCmd(ENABLE);<br />
</p>


<p>
4 函数BKP_ITConfig();<br />
</p>

<p>
功能描述：使能或者失能侵入检测中断<br />
例： <br />
BKP_ITConfig(ENABLE);<br />
</p>


<p>
5 函数BKP_RTCOutputConfig();<br />
</p>

<p>
功能描述：选择在侵入检测管脚上输出的RTC时钟源<br />
例：<br />
BKP_RTCOutputConfig(BKP_RTCOutputSource_CalibClock);<br />
</p>

<p>
BKP_RTCOutputSource <br />
参数BKP_RTCOutputSource用来选择RTC输出时钟源<br />
BKP_RTCOutputSource_None 侵入检测管脚上无RTC输出<br />
BKP_RTCOutputSource_CalibClock 侵入检测管脚上输出，其时钟频率为RTC时钟除以64<br />
BKP_RTCOutputSource_Alarm 侵入检测管脚上输出RTC闹钟脉冲<br />
BKP_RTCOutputSource_Second 侵入检测管脚上输出RTC秒脉冲<br />
</p>


<p>
6 函数BKP_SetRTCCalibrationValue();<br />
</p>

<p>
功能描述：设置RTC时钟校准值<br />
例： <br />
BKP_SetRTCCalibrationValue(0x7F);<br />
</p>


<p>
7 函数BKP_WriteBackupRegister();<br />
</p>

<p>
功能描述：向指定的后备寄存器中写入用户程序数据<br />
例：<br />
BKP_WriteBackupRegister(BKP_DR1, 0xA587);<br />
</p>

<p>
BKP_DR 参数BKP_DR用来选择数据后备寄存器<br />
BKP_DRx：选中数据寄存器x（1—10）<br />
</p>


<p>
8 函数BKP_ReadBackupRegister();<br />
</p>

<p>
功能描述：从指定的后备寄存器中读出数据<br />
例：<br />
u16 Data; Data = BKP_ReadBackupRegister(BKP_DR1);<br />
</p>


<p>
9 函数BKP_GetFlagStatus();<br />
功能描述：检查侵入检测管脚事件的标志位被置位与否<br />
例：<br />
FlagStatus Status; <br />
Status = BKP_GetFlagStatus(); <br />
if(Status == RESET) <br />
{ ... } <br />
else <br />
{ ... }<br />
</p>

<p>
10 函数BKP_ClearFlag();<br />
</p>

<p>
功能描述：清除侵入检测管脚事件的待处理标志位<br />
例： <br />
BKP_ClearFlag();<br />
</p>


<p>
11 函数BKP_GetITStatus();<br />
</p>

<p>
功能描述：检查侵入检测中断发生与否<br />
例： <br />
ITStatus Status; <br />
Status = BKP_GetITStatus(); <br />
if(Status == RESET) <br />
{ ... } <br />
else <br />
{ ... }<br />
</p>


<p>
12 函数BKP_ClearITPendingBit();<br />
</p>

<p>
功能描述：清除侵侵入检测中断的待处理位<br />
例： <br />
BKP_ClearITPendingBit();<br />
</p>




<p>
六、DMA控制器（DMA）<br />
</p>


<p>
DMA寄存器结构<br />
</p>

<p>
DMA寄存器结构，DMA_Cannel_TypeDef和DMA_TypeDef，在文件“stm32f10x_map.h”中定义如下： <br />
typedef struct <br />
{ <br />
vu32 CCR; <br />
vu32 CNDTR; <br />
vu32 CPAR; <br />
vu32 CMAR; <br />
} <br />
DMA_Channel_TypeDef; <br />
</p>

<p>
typedef struct <br />
{ <br />
vu32 ISR; <br />
vu32 IFCR; <br />
} <br />
DMA_TypeDef;<br />
</p>


<p>
DMA库函数<br />
</p>


<p>
1 函数DMA_DeInit<br />
</p>

<p>
功能描述：将DMA的通道x寄存器重设为缺省值<br />
例： <br />
DMA_DeInit(DMA_Channel2);<br />
</p>


<p>
2 函数DMA_Init<br />
功能描述：根据DMA_InitStruct中指定的参数初始化DMA的通道x寄存器<br />
DMA_InitStruct：指向结构DMA_InitTypeDef的指针，包含了DMA通道x的配置信息<br />
DMA_InitTypeDef structure <br />
DMA_InitTypeDef定义于文件“stm32f10x_dma.h”： <br />
typedef struct <br />
{ <br />
u32 DMA_PeripheralBaseAddr; <br />
u32 DMA_MemoryBaseAddr; <br />
u32 DMA_DIR; u32 DMA_BufferSize; <br />
u32 DMA_PeripheralInc; <br />
u32 DMA_MemoryInc; <br />
u32 DMA_PeripheralDataSize; <br />
u32 DMA_MemoryDataSize; <br />
u32 DMA_Mode; <br />
u32 DMA_Priority; <br />
u32 DMA_M2M; <br />
} <br />
DMA_InitTypeDef;<br />
</p>


<p>
DMA_PeripheralBaseAddr <br />
该参数用以定义DMA外设基地址<br />
</p>

<p>
DMA_MemoryBaseAddr<br />
该参数用以定义DMA内存基地址<br />
</p>

<p>
DMA_DIR <br />
DMA_DIR规定了外设是作为数据传输的目的地还是来源。<br />
DMA_DIR_PeripheralDST：外设作为数据传输的目的地 <br />
DMA_DIR_PeripheralSRC：外设作为数据传输的来源<br />
</p>

<p>
DMA_BufferSize <br />
DMA_BufferSize用以定义指定DMA通道的DMA缓存的大小，单位为数据单位。根据传输方向，数据单位等于结构中参数DMA_PeripheralDataSize或者参数DMA_MemoryDataSize的值。<br />
</p>

<p>
DMA_PeripheralInc <br />
DMA_PeripheralInc用来设定外设地址寄存器递增与否<br />
DMA_PeripheralInc_Enable：外设地址寄存器递增 <br />
DMA_PeripheralInc_Disable：外设地址寄存器不变<br />
</p>

<p>
DMA_MemoryInc <br />
DMA_MemoryInc用来设定内存地址寄存器递增与否。<br />
DMA_PeripheralInc_Enable：内存地址寄存器递增 <br />
DMA_PeripheralInc_Disable：内存地址寄存器不变<br />
</p>

<p>
DMA_PeripheralDataSize <br />
DMA_PeripheralDataSize设定了外设数据宽度。<br />
DMA_PeripheralDataSize_Byte：数据宽度为8位<br />
DMA_PeripheralDataSize_HalfWord：数据宽度为16位<br />
DMA_PeripheralDataSize_Word：数据宽度为32位<br />
</p>

<p>
DMA_MemoryDataSize <br />
DMA_MemoryDataSize设定了外设数据宽度。<br />
DMA_MemoryDataSize_Byte：数据宽度为8位<br />
DMA_MemoryDataSize_HalfWord：数据宽度为16位<br />
DMA_MemoryDataSize_Word：数据宽度为32位<br />
</p>

<p>
DMA_Mode <br />
DMA_Mode设置了CAN的工作模式，<br />
DMA_Mode_Circular：工作在循环缓存模式 <br />
DMA_Mode_Normal：工作在正常缓存模式<br />
</p>

<p>
DMA_Priority <br />
DMA_Priority设定DMA通道x的软件优先级。<br />
DMA_Priority_VeryHigh：DMA通道x拥有非常高优先级<br />
DMA_Priority_High：DMA通道x拥有高优先级<br />
DMA_Priority_Medium：DMA通道x拥有中优先级<br />
DMA_Priority_Low：DMA通道x拥有低优先级<br />
</p>

<p>
DMA_M2M <br />
DMA_M2M使能DMA通道的内存到内存传输。<br />
DMA_M2M_Enable：DMA通道x设置为内存到内存传输<br />
DMA_M2M_Disable：DMA通道x没有设置为内存到内存传输<br />
</p>

<p>
例：<br />
DMA_InitTypeDef DMA_InitStructure; <br />
DMA_InitStructure.DMA_PeripheralBaseAddr = 0x40005400; <br />
DMA_InitStructure.DMA_MemoryBaseAddr = 0x20000100; <br />
DMA_InitStructure.DMA_DIR = DMA_DIR_PeripheralSRC; <br />
DMA_InitStructure.DMA_BufferSize = 256; DMA_InitStructure.<br />
DMA_PeripheralInc = DMA_PeripheralInc_Disable; <br />
DMA_InitStructure.DMA_MemoryInc = DMA_MemoryInc_Enable; <br />
DMA_InitStructure.DMA_PeripheralDataSize = DMA_PeripheralDataSize_HalfWord; <br />
DMA_InitStructure.DMA_MemoryDataSize = DMA_MemoryDataSize_HalfWord; <br />
DMA_InitStructure.DMA_Mode = DMA_Mode_Normal; <br />
DMA_InitStructure.DMA_Priority = DMA_Priority_Medium; <br />
DMA_InitStructure.DMA_M2M = DMA_M2M_Disable; <br />
DMA_Init(DMA_Channel1, &amp;DMA_InitStructure);<br />
</p>


<p>
3 函数DMA_StructInit<br />
</p>

<p>
功能描述：把DMA_InitStruct中的每一个参数按缺省值填入<br />
DMA_InitStruct：指向结构DMA_InitTypeDef的指针，待初始化<br />
</p>

<p>
结构DMA_InitStruct的各个成员有如下的缺省值：<br />
DMA_PeripheralBaseAddr：0 <br />
DMA_MemoryBaseAddr：0 <br />
DMA_DIR：DMA_DIR_PeripheralSRC <br />
DMA_BufferSize：0 <br />
DMA_PeripheralInc：DMA_PeripheralInc_Disable <br />
DMA_MemoryInc：DMA_MemoryInc_Disable <br />
DMA_PeripheralDataSize：DMA_PeripheralDataSize_Byte <br />
DMA_MemoryDataSize：DMA_MemoryDataSize_Byte <br />
DMA_Mode：DMA_Mode_Normal <br />
DMA_Priority：DMA_Priority_Low <br />
DMA_M2M：DMA_M2M_Disable<br />
</p>

<p>
例：<br />
DMA_InitTypeDef DMA_InitStructure; <br />
DMA_StructInit(&amp;DMA_InitStructure);<br />
</p>


<p>
4 函数DMA_Cmd<br />
</p>

<p>
功能描述：使能或者失能指定的通道x<br />
例：<br />
DMA_Cmd(DMA_Channel7, ENABLE);<br />
</p>


<p>
5 函数DMA_ITConfig<br />
</p>

<p>
功能描述：使能或者失能指定的通道x中断<br />
例：<br />
DMA_ITConfig(DMA_Channel5, DMA_IT_TC, ENABLE);<br />
</p>

<p>
DMA_IT <br />
输入参数DMA_IT使能或者失能DMA通道x的中断。<br />
DMA_IT_TC：传输完成中断屏蔽 <br />
DMA_IT_HT：传输过半中断屏蔽 <br />
DMA_IT_TE：传输错误中断屏蔽<br />
</p>


<p>
6 函数DMA_GetCurrDataCounte<br />
</p>

<p>
功能描述：返回当前DMA通道x剩余的待传输数据数目<br />
例：<br />
u16 CurrDataCount; <br />
CurrDataCount = DMA_GetCurrDataCounter(DMA_Channel2);<br />
</p>


<p>
7 函数DMA_GetFlagStatus<br />
</p>

<p>
功能描述：检查指定的DMA通道x标志位设置与否<br />
例：<br />
FlagStatus Status; <br />
Status = DMA_GetFlagStatus(DMA_FLAG_HT6);<br />
</p>

<p>
DMA_FLAG 参数DMA_FLAG定义了待检察的标志位类型<br />
DMA_FLAG_GLx：通道x全局标志位<br />
DMA_FLAG_TCx：通道x传输完成标志位<br />
DMA_FLAG_HTx：通道x传输过半标志位<br />
DMA_FLAG_TEx：通道x传输错误标志位(1--7)<br />
</p>


<p>
8 函数DMA_ClearFlag<br />
</p>

<p>
功能描述：清除DMA通道x待处理标志位<br />
例：<br />
DMA_ClearFlag(DMA_FLAG_TE3);<br />
</p>


<p>
9 函数DMA_GetITStatus<br />
</p>

<p>
功能描述：检查指定的DMA通道x中断发生与否<br />
例： <br />
ITStatus Status; <br />
Status = DMA_GetITStatus(DMA_IT_TC7);<br />
</p>

<p>
DMA_IT <br />
参数DMA_IT定义了待检察的DMA中断。<br />
DMA_IT_GLx：通道x全局中断<br />
DMA_IT_TCx：通道x传输完成中断<br />
DMA_IT_HTx：通道x传输过半中断<br />
DMA_IT_TEx：通道x传输错误中断(1--7)<br />
</p>


<p>
10 函数DMA_ClearITPendingBit<br />
</p>

<p>
功能描述：清除DMA通道x中断待处理标志位<br />
例：<br />
DMA_ClearITPendingBit(DMA_IT_GL5);<br />
</p>







<p>
七、复位和时钟设置（RCC）<br />
</p>


<p>
RCC寄存器结构<br />
</p>

<p>
RCC寄存器结构，RCC_TypeDeff，在文件“stm32f10x_map.h”中定义如下： <br />
typedef struct <br />
{ <br />
vu32 CR; <br />
vu32 CFGR; <br />
vu32 CIR; <br />
vu32 APB2RSTR; <br />
vu32 APB1RSTR; <br />
vu32 AHBENR; <br />
vu32 APB2ENR; <br />
vu32 APB1ENR; <br />
vu32 BDCR; <br />
vu32 CSR; <br />
} <br />
RCC_TypeDef;<br />
</p>


<p>
RCC库函数<br />
</p>

<p>
1 函数RCC_DeInit<br />
</p>

<p>
功能描述：将外设RCC寄存器重设为缺省值<br />
例： <br />
RCC_DeInit();<br />
1. 该函数不改动寄存器RCC_CR的HSITRIM[4:0]位。<br />
2. 该函数不重置寄存器RCC_BDCR和寄存器RCC_CSR。<br />
</p>


<p>
2 函数RCC_HSEConfig<br />
</p>

<p>
功能描述：设置外部高速晶振（HSE）<br />
例： <br />
RCC_HSEConfig(RCC_HSE_ON);<br />
</p>

<p>
RCC_HSE <br />
该参数设置了HSE的状态<br />
RCC_HSE_OFF：HSE晶振OFF <br />
RCC_HSE_ON：HSE晶振ON <br />
RCC_HSE_Bypass：HSE晶振被外部时钟旁路<br />
</p>


<p>
3 函数RCC_WaitForHSEStartUp<br />
</p>

<p>
功能描述：等待HSE起振，该函数将等待直到HSE就绪，或者在超时的情况下退出<br />
例： <br />
ErrorStatus HSEStartUpStatus; <br />
RCC_HSEConfig(RCC_HSE_ON); /* Enable HSE */ <br />
HSEStartUpStatus = RCC_WaitForHSEStartUp();/* Wait till HSE is ready and if Time out is reached exit */ <br />
if(HSEStartUpStatus == SUCCESS) <br />
{ <br />
/* Add here PLL ans system clock config */ <br />
} <br />
else <br />
{ <br />
/* Add here some code to deal with this error */ <br />
}<br />
</p>


<p>
4 函数RCC_AdjustHSICalibrationValue<br />
</p>

<p>
功能描述：调整内部高速晶振（HSI）校准值<br />
例： <br />
RCC_AdjustHSICalibrationValue(0x1F);<br />
</p>


<p>
5 函数RCC_HSICmd<br />
</p>

<p>
功能描述：使能或者失能内部高速晶振（HSI）<br />
例： <br />
RCC_HSICmd(ENABLE);<br />
</p>


<p>
6 函数RCC_PLLConfig<br />
</p>

<p>
功能描述：设置PLL时钟源及倍频系数<br />
例： <br />
RCC_PLLConfig(RCC_PLLSource_HSE_Div1, RCC_PLLMul_9);<br />
警告：必须正确设置软件，使PLL输出时钟频率不超过72 MHz <br />
</p>

<p>
RCC_PLLSource <br />
RCC_PLLSource用以设置PLL的输入时钟源。<br />
RCC_PLLSource_HSI_Div2：PLL的输入时钟 = HSI时钟频率除以2 <br />
RCC_PLLSource_HSE_Div1：PLL的输入时钟 = HSE时钟频率<br />
RCC_PLLSource_HSE_Div2：PLL的输入时钟 = HSE 时钟频率除以2<br />
</p>

<p>
RCC_PLLMul <br />
该参数用以设置PLL的倍频系数。<br />
RCC_PLLMul_a：PLL输入时钟 x a；（2--16）<br />
</p>


<p>
7 函数RCC_PLLCmd<br />
</p>

<p>
功能描述：使能或者失能PLL<br />
例： <br />
RCC_PLLCmd(ENABLE);<br />
</p>


<p>
8 函数RCC_SYSCLKConfig<br />
</p>

<p>
功能描述：设置系统时钟（SYSCLK）<br />
例： <br />
RCC_SYSCLKConfig(RCC_SYSCLKSource_PLLCLK);<br />
</p>

<p>
RCC_SYSCLKSource <br />
该参数设置了系统时钟<br />
RCC_SYSCLKSource_HSI：选择HSI作为系统时钟<br />
RCC_SYSCLKSource_HSE：选择HSE作为系统时钟<br />
RCC_SYSCLKSource_PLLCLK：选择PLL作为系统时钟<br />
</p>


<p>
9 函数RCC_GetSYSCLKSource<br />
</p>

<p>
功能描述：返回用作系统时钟的时钟源<br />
例： <br />
if(RCC_GetSYSCLKSource() != 0x04) /* Test if HSE is used as system clock */ <br />
{ <br />
} <br />
else <br />
{ <br />
}<br />
</p>

<p>
返回值 <br />
用作系统时钟的时钟源： <br />
0x00：HSI作为系统时钟<br />
0x04：HSE作为系统时钟<br />
0x08：PLL作为系统时钟<br />
</p>


<p>
10 函数RCC_HCLKConfig<br />
</p>

<p>
功能描述：设置AHB时钟（HCLK）<br />
例： <br />
/* Configure HCLK such as HCLK = SYSCLK */ <br />
RCC_HCLKConfig(RCC_SYSCLK_Div1);<br />
</p>

<p>
RCC_HCLK <br />
该参数设置了AHB时钟<br />
RCC_SYSCLK_Div1：AHB时钟 = 系统时钟 /1<br />
RCC_SYSCLK_Div2：AHB时钟 = 系统时钟 / 2 <br />
RCC_SYSCLK_Div4：AHB时钟 = 系统时钟 / 4 <br />
RCC_SYSCLK_Div8：AHB时钟 = 系统时钟 / 8 <br />
RCC_SYSCLK_Div16：AHB时钟 = 系统时钟 / 16 <br />
RCC_SYSCLK_Div64：AHB时钟 = 系统时钟 / 64 <br />
RCC_SYSCLK_Div128：AHB时钟 = 系统时钟 / 128 <br />
RCC_SYSCLK_Div256：AHB时钟 = 系统时钟 / 256 <br />
RCC_SYSCLK_Div512：AHB时钟 = 系统时钟 / 512<br />
</p>


<p>
11 函数RCC_PCLK1Config<br />
</p>

<p>
功能描述：设置低速AHB时钟（PCLK1）<br />
例： <br />
RCC_PCLK1Config(RCC_HCLK_Div2);<br />
</p>

<p>
RCC_PCLK1 <br />
该参数设置了低速AHB时钟（PCLK1）<br />
RCC_HCLK_Div1：APB1时钟 = HCLK /1<br />
RCC_HCLK_Div2：APB1时钟 = HCLK / 2 <br />
RCC_HCLK_Div4：APB1时钟 = HCLK / 4 <br />
RCC_HCLK_Div8：APB1时钟 = HCLK / 8 <br />
RCC_HCLK_Div16：APB1时钟 = HCLK / 16<br />
</p>



<p>
12 函数RCC_PCLK2Config<br />
</p>

<p>
功能描述：设置高速AHB时钟（PCLK2）<br />
例： <br />
RCC_PCLK2Config(RCC_HCLK_Div1);<br />
</p>

<p>
RCC_PCLK2 <br />
该参数设置了高速AHB时钟（PCLK2）<br />
RCC_HCLK_Div1：APB2时钟 = HCLK <br />
RCC_HCLK_Div2：APB2时钟 = HCLK / 2 <br />
RCC_HCLK_Div4：APB2时钟 = HCLK / 4 <br />
RCC_HCLK_Div8：APB2时钟 = HCLK / 8 <br />
RCC_HCLK_Div16：APB2时钟 = HCLK / 16<br />
</p>


<p>
13 函数RCC_ITConfig<br />
</p>

<p>
功能描述：使能或者失能指定的RCC中断<br />
例： <br />
RCC_ITConfig(RCC_IT_PLLRDY, ENABLE);<br />
</p>

<p>
RCC_IT <br />
输入参数RCC_IT使能或者失能RCC的中断。<br />
RCC_IT_LSIRDY：LSI就绪中断<br />
RCC_IT_LSERDY：LSE就绪中断<br />
RCC_IT_HSIRDY：HSI就绪中断<br />
RCC_IT_HSERDY：HSE就绪中断<br />
RCC_IT_PLLRDY：PLL就绪中断<br />
</p>


<p>
14 函数RCC_USBCLKConfig<br />
</p>

<p>
功能描述：设置USB时钟（USBCLK）<br />
例： <br />
RCC_USBCLKConfig(RCC_USBCLKSource_PLLCLK_1Div5);<br />
</p>

<p>
RCC_USBCLKSource <br />
该参数设置了USB时钟（USBCLK）<br />
RCC_USBCLKSource_PLLCLK_1Div5：USB时钟 = PLL时钟除以1.5 <br />
RCC_USBCLKSource_PLLCLK_Div1：USB时钟 = PLL时钟<br />
</p>


<p>
15 函数RCC_ADCCLKConfig<br />
</p>

<p>
功能描述：设置ADC时钟（ADCCLK）<br />
例： <br />
RCC_ADCCLKConfig(RCC_PCLK2_Div2);<br />
</p>

<p>
RCC_ADCCLKSource <br />
该参数设置了ADC时钟（ADCCLK）<br />
RCC_PCLK2_Div2：ADC时钟 = PCLK / 2 <br />
RCC_PCLK2_Div4：ADC时钟 = PCLK / 4 <br />
RCC_PCLK2_Div6：ADC时钟 = PCLK / 6 <br />
RCC_PCLK2_Div8：ADC时钟 = PCLK / 8<br />
</p>


<p>
16 函数RCC_LSEConfig<br />
</p>

<p>
功能描述：设置外部低速晶振（LSE）<br />
例： <br />
/* Enable the LSE */ <br />
RCC_LSEConfig(RCC_LSE_ON);<br />
</p>

<p>
RCC_LSE <br />
该参数设置了HSE的状态<br />
RCC_LSE_OFF：LSE晶振OFF <br />
RCC_LSE_ON：LSE晶振ON <br />
RCC_LSE_Bypass：LSE晶振被外部时钟旁路<br />
</p>


<p>
17 函数RCC_LSICmd<br />
</p>

<p>
功能描述：使能或者失能内部低速晶振（LSI）<br />
例： <br />
RCC_LSICmd(ENABLE);<br />
</p>


<p>
18 函数RCC_RTCCLKConfig<br />
</p>

<p>
功能描述：设置RTC时钟（RTCCLK）<br />
例： <br />
RCC_RTCCLKConfig(RCC_RTCCLKSource_LSE);<br />
</p>

<p>
RCC_RTCCLKSource <br />
该参数设置了RTC时钟（RTCCLK）<br />
RCC_RTCCLKSource_LSE：选择LSE作为RTC时钟<br />
RCC_RTCCLKSource_LSI：选择LSI作为RTC时钟<br />
RCC_RTCCLKSource_HSE_Div128：选择HSE时钟频率除以128作为RTC时钟<br />
</p>


<p>
19 函数RCC_RTCCLKCmd<br />
</p>

<p>
功能描述：使能或者失能RTC时钟<br />
例： <br />
RCC_RTCCLKCmd(ENABLE);<br />
</p>


<p>
20 函数RCC_GetClocksFreq<br />
</p>

<p>
功能描述：返回不同片上时钟的频率<br />
例： <br />
RCC_ClocksTypeDef RCC_Clocks; <br />
RCC_GetClocksFreq(&amp;RCC_Clocks);<br />
</p>

<p>
RCC_Clocks：指向结构RCC_ClocksTypeDef的指针，包含了各个时钟的频率<br />
RCC_ClocksTypeDef structure <br />
RCC_ClocksTypeDef定义于文件“stm32f10x_rcc.h”： <br />
typedef struct <br />
{ <br />
u32 SYSCLK_Frequency; <br />
u32 HCLK_Frequency; <br />
u32 PCLK1_Frequency; <br />
u32 PCLK2_Frequency; <br />
u32 ADCCLK_Frequency; <br />
}<br />
RCC_ClocksTypeDef; <br />
</p>

<p>
SYSCLK_Frequency <br />
该成员返回SYSCLK的频率，单位 Hz <br />
</p>

<p>
HCLK_Frequency <br />
该成员返回HCLK的频率，单位 Hz <br />
</p>

<p>
PCLK1_Frequency <br />
该成员返回PCLK1的频率，单位 Hz <br />
</p>

<p>
PCLK2_Frequency <br />
该成员返回PCLK2的频率，单位 Hz <br />
</p>

<p>
ADCCLK_Frequency <br />
该成员返回ADCCLK的频率，单位 Hz<br />
</p>


<p>
21 函数RCC_AHBPeriphClockCmd<br />
</p>

<p>
功能描述：使能或者失能AHB外设时钟<br />
例： <br />
RCC_AHBPeriphClockCmd(RCC_AHBPeriph_DMA);<br />
</p>

<p>
RCC_AHBPeriph <br />
该参数被门控的AHB外设时钟，可以取下表的一个或者多个取值的组合作为该参数的值。<br />
RCC_AHBPeriph_DMA：DMA时钟<br />
RCC_AHBPeriph_SRAM：SRAM时钟<br />
RCC_AHBPeriph_FLITF：FLITF时钟<br />
</p>


<p>
22 函数RCC_APB2PeriphClockCmd<br />
</p>

<p>
功能描述：使能或者失能APB2外设时钟<br />
例： <br />
RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOB | RCC_APB2Periph_SPI1, ENABLE);<br />
</p>

<p>
RCC_APB2Periph <br />
该参数被门控的APB2外设时钟，可以取下表的一个或者多个取值的组合作为该参数的值。<br />
RCC_APB2Periph_AFIO：功能复用IO时钟<br />
RCC_APB2Periph_GPIOA：GPIOA时钟<br />
RCC_APB2Periph_GPIOB：GPIOB时钟<br />
RCC_APB2Periph_GPIOC：GPIOC时钟<br />
RCC_APB2Periph_GPIOD：GPIOD时钟<br />
RCC_APB2Periph_GPIOE：GPIOE时钟<br />
RCC_APB2Periph_ADC1：ADC1时钟<br />
RCC_APB2Periph_ADC2：ADC2时钟<br />
RCC_APB2Periph_TIM1：TIM1时钟<br />
RCC_APB2Periph_SPI1：SPI1时钟<br />
RCC_APB2Periph_USART1：USART1时钟<br />
RCC_APB2Periph_ALL：全部APB2外设时钟<br />
</p>



<p>
23 函数RCC_APB1PeriphClockCmd<br />
</p>

<p>
功能描述：使能或者失能APB1外设时钟<br />
例： <br />
RCC_APB1PeriphClockCmd(RCC_APB1Periph_BKP | RCC_APB1Periph_PWR, ENABLE);<br />
</p>

<p>
RCC_APB1Periph <br />
该参数被门控的APB1外设时钟，可以取下表的一个或者多个取值的组合作为该参数的值。<br />
RCC_APB1Periph_TIM2：TIM2时钟<br />
RCC_APB1Periph_TIM3：TIM3时钟<br />
RCC_APB1Periph_TIM4：TIM4时钟<br />
RCC_APB1Periph_WWDG：WWDG时钟<br />
RCC_APB1Periph_SPI2：SPI2时钟<br />
RCC_APB1Periph_USART2：USART2时钟<br />
RCC_APB1Periph_USART3：USART3时钟<br />
RCC_APB1Periph_I2C1：I2C1时钟<br />
RCC_APB1Periph_I2C2：I2C2时钟<br />
RCC_APB1Periph_USB：USB时钟<br />
RCC_APB1Periph_CAN：CAN时钟<br />
</p>


<p>
24 函数RCC_APB2PeriphResetCmd<br />
</p>

<p>
功能描述：强制或者释放高速APB（APB2）外设复位<br />
例： <br />
/* Enter the SPI1 peripheral to reset */ <br />
RCC_APB2PeriphResetCmd(RCC_APB2Periph_SPI1, ENABLE); <br />
/* Exit the SPI1 peripheral from reset */ <br />
RCC_APB2PeriphResetCmd(RCC_APB2Periph_SPI1, DISABLE);<br />
</p>


<p>
25 函数RCC_APB1PeriphResetCmd<br />
</p>

<p>
功能描述：强制或者释放低速APB（APB1）外设复位<br />
例： <br />
/* Enter the SPI2 peripheral to reset */ <br />
RCC_APB1PeriphResetCmd(RCC_APB1Periph_SPI2, ENABLE); <br />
/* Exit the SPI2 peripheral from reset */ <br />
RCC_APB1PeriphResetCmd(RCC_APB1Periph_SPI2, DISABLE);<br />
</p>


<p>
26 函数RCC_BackupResetCmd<br />
</p>

<p>
功能描述：强制或者释放后备域复位<br />
例： <br />
/* Reset the entire Backup domain */ <br />
RCC_BackupResetCmd(ENABLE);<br />
</p>


<p>
27 函数RCC_ClockSecuritySystemCmd<br />
</p>

<p>
功能描述：使能或者失能时钟安全系统<br />
例： <br />
/* Enable the Clock Security System */ <br />
RCC_ClockSecuritySystemCmd(ENABLE);<br />
</p>


<p>
28 函数RCC_MCOConfig<br />
</p>

<p>
功能描述：选择在MCO管脚上输出的时钟源<br />
例： <br />
RCC_MCOConfig(RCC_MCO_PLLCLK_Div2);<br />
警告：当选中系统时钟作为MCO管脚的输出时，注意它的时钟频率不超过50MHz(最大I/O速率)。<br />
</p>

<p>
RCC_MCO <br />
该参数设置了指定输出的时钟源<br />
RCC_MCO_NoClock：无时钟被选中 <br />
RCC_MCO_SYSCLK：选中系统时钟 <br />
RCC_MCO_HSI：选中HSI <br />
RCC_MCO_HSE：选中HSE <br />
RCC_MCO_PLLCLK_Div2：选中PLL时钟除以2<br />
</p>


<p>
29 函数RCC_GetFlagStatus<br />
</p>

<p>
功能描述：检查指定的RCC标志位设置与否<br />
例： <br />
/* Test if the PLL clock is ready or not */ <br />
FlagStatus Status; <br />
Status = RCC_GetFlagStatus(RCC_FLAG_PLLRDY); <br />
if(Status == RESET) <br />
{ <br />
... <br />
} <br />
else<br />
</p>

<p>
RCC_FLAG <br />
给出了所有可以被函数RCC_ GetFlagStatus检查的标志位列表<br />
RCC_FLAG_HSIRDY：HSI晶振就绪<br />
RCC_FLAG_HSERDY：HSE晶振就绪<br />
RCC_FLAG_PLLRDY：PLL就绪<br />
RCC_FLAG_LSERDY：LSI晶振就绪<br />
RCC_FLAG_LSIRDY：LSE晶振就绪<br />
RCC_FLAG_PINRST：管脚复位 <br />
RCC_FLAG_PORRST：POR/PDR复位<br />
RCC_FLAG_SFTRST：软件复位 <br />
RCC_FLAG_IWDGRST I：WDG复位<br />
RCC_FLAG_WWDGRST：WWDG复位<br />
RCC_FLAG_LPWRRST：低功耗复位<br />
</p>


<p>
30 函数RCC_ClearFlag<br />
</p>

<p>
功能描述：清除RCC的复位标志位<br />
例： <br />
RCC_ClearFlag();<br />
</p>


<p>
31 函数RCC_GetITStatus<br />
</p>

<p>
功能描述：检查指定的RCC中断发生与否<br />
例： <br />
/* Test if the PLL Ready interrupt has occurred or not */ <br />
ITStatus Status; <br />
Status = RCC_GetITStatus(RCC_IT_PLLRDY);<br />
if(Status == RESET) <br />
{ <br />
... <br />
} <br />
else <br />
{ <br />
... <br />
}<br />
</p>

<p>
RCC_IT <br />
给出了所有可以被函数RCC_ GetITStatus检查的中断标志位列表<br />
RCC_IT_LSIRDY：LSI晶振就绪中断<br />
RCC_IT_LSERDY：LSE晶振就绪中断<br />
RCC_IT_HSIRDY： HSI晶振就绪中断<br />
RCC_IT_HSERDY：HSE晶振就绪中断<br />
RCC_IT_PLLRDY：PLL就绪中断<br />
RCC_IT_CSS：时钟安全系统中断<br />
</p>


<p>
32 函数RCC_ClearITPendingBit<br />
</p>

<p>
功能描述：清除RCC的中断待处理位<br />
例： <br />
/* Clear the PLL Ready interrupt pending bit */ <br />
RCC_ClearITPendingBit(RCC_IT_PLLRDY);<br />
</p>

<p>
RCC_IT <br />
给出了所有可以被函数RCC_ ClearITPendingBit清除的中断待处理位列表<br />
RCC_IT_LSIRDY：LSI晶振就绪中断<br />
RCC_IT_LSERDY：LSE晶振就绪中断<br />
RCC_IT_HSIRDY：HSI晶振就绪中断<br />
RCC_IT_HSERDY：HSE晶振就绪中断<br />
RCC_IT_PLLRDY：PLL就绪中断<br />
RCC_IT_CSS：时钟安全系统中断<br />
</p>




<p>
八、嵌套向量中断控制器（NVIC）<br />
</p>




<p>
NVIC寄存器结构<br />
</p>

<p>
NVIC寄存器结构，NVIC_TypeDeff，在文件“stm32f10x_map.h”中定义如下： <br />
typedef struct <br />
{ <br />
vu32 Enable[2]; <br />
u32 RESERVED0[30]; <br />
vu32 Disable[2]; <br />
u32 RSERVED1[30]; <br />
vu32 Set[2]; <br />
u32 RESERVED2[30]; <br />
vu32 Clear[2]; <br />
u32 RESERVED3[30]; <br />
vu32 Active[2]; <br />
u32 RESERVED4[62]; <br />
vu32 Priority[11]; <br />
} <br />
NVIC_TypeDef;/* NVIC Structure */ <br />
</p>

<p>
typedef struct <br />
{ <br />
vu32 CPUID; <br />
vu32 IRQControlState; <br />
vu32 ExceptionTableOffset; <br />
vu32 AIRC; <br />
vu32 SysCtrl; <br />
vu32 ConfigCtrl; <br />
vu32 SystemPriority[3]; <br />
vu32 SysHandlerCtrl; <br />
vu32 ConfigFaultStatus; <br />
vu32 HardFaultStatus; <br />
vu32 DebugFaultStatus; <br />
vu32 MemoryManageFaultAddr; <br />
vu32 BusFaultAddr; <br />
} <br />
SCB_TypeDef; /* System Control Block Structure */<br />
</p>




<p>
NVIC库函数<br />
</p>

<p>
1 函数NVIC_DeInit<br />
</p>

<p>
功能描述：将外设NVIC寄存器重设为缺省值<br />
例： <br />
NVIC_DeInit();<br />
</p>


<p>
2 函数NVIC_SCBDeInit<br />
</p>

<p>
功能描述：将外设SCB寄存器重设为缺省值<br />
例： <br />
NVIC_SCBDeInit();<br />
</p>


<p>
3 函数NVIC_PriorityGroupConfig<br />
</p>

<p>
功能描述：设置优先级分组：先占优先级和从优先级<br />
例： <br />
NVIC_PriorityGroupConfig(NVIC_PriorityGroup_1);<br />
</p>

<p>
NVIC_PriorityGroup <br />
该参数设置优先级分组位长度<br />
NVIC_PriorityGroup_0：先占优先级0位从优先级4位<br />
NVIC_PriorityGroup_1：先占优先级1位从优先级3位<br />
NVIC_PriorityGroup_2：先占优先级2位从优先级2位<br />
NVIC_PriorityGroup_3：先占优先级3位从优先级1位<br />
NVIC_PriorityGroup_4：先占优先级4位从优先级0位<br />
</p>


<p>
4 函数NVIC_Init<br />
</p>

<p>
功能描述：根据NVIC_InitStruct中指定的参数初始化外设NVIC寄存器<br />
NVIC_InitStruct：指向结构NVIC_InitTypeDef的指针，包含了外设GPIO的配置信息<br />
</p>

<p>
NVIC_InitTypeDef structure <br />
NVIC_InitTypeDef定义于文件“stm32f10x_nvic.h”： <br />
typedef struct <br />
{ <br />
u8 NVIC_IRQChannel; <br />
u8 NVIC_IRQChannelPreemptionPriority; <br />
u8 NVIC_IRQChannelSubPriority; <br />
FunctionalState NVIC_IRQChannelCmd; <br />
} <br />
NVIC_InitTypeDef; <br />
</p>

<p>
例： <br />
NVIC_InitTypeDef NVIC_InitStructure; <br />
NVIC_PriorityGroupConfig(NVIC_PriorityGroup_1); <br />
NVIC_InitStructure.NVIC_IRQChannel = TIM3_IRQChannel; <br />
NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;<br />
NVIC_InitStructure.NVIC_IRQChannelSubPriority = 2; <br />
NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE; <br />
NVIC_InitStructure(&amp;NVIC_InitStructure); <br />
</p>

<p>
NVIC_InitStructure.NVIC_IRQChannel = USART1_IRQChannel; <br />
NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 1; <br />
NVIC_InitStructure.NVIC_IRQChannelSubPriority = 5; <br />
NVIC_InitStructure(&amp;NVIC_InitStructure); <br />
</p>

<p>
NVIC_InitStructure.NVIC_IRQChannel = RTC_IRQChannel; <br />
NVIC_InitStructure.NVIC_IRQChannelSubPriority = 7; <br />
NVIC_InitStructure(&amp;NVIC_InitStructure); <br />
</p>

<p>
NVIC_InitStructure.NVIC_IRQChannel = EXTI4_IRQChannel; <br />
NVIC_InitStructure.NVIC_IRQChannelSubPriority = 7; <br />
NVIC_InitStructure(&amp;NVIC_InitStructure); <br />
</p>

<p>
NVIC_IRQChannel <br />
该参数用以使能或者失能指定的IRQ通道。<br />
WWDG_IRQChannel：窗口看门狗中断 <br />
PVD_IRQChannel：PVD通过EXTI探测中断<br />
TAMPER_IRQChannel：篡改中断 <br />
RTC_IRQChannel：RTC全局中断<br />
FlashItf_IRQChannel：FLASH全局中断<br />
RCC_IRQChannel：RCC全局中断<br />
EXTI0_IRQChannel：外部中断线0中断<br />
EXTI1_IRQChannel：外部中断线1中断<br />
EXTI2_IRQChannel：外部中断线2中断<br />
EXTI3_IRQChannel：外部中断线3中断<br />
EXTI4_IRQChannel：外部中断线4中断<br />
DMAChannel1_IRQChannel：DMA通道1中断<br />
DMAChannel2_IRQChannel：DMA通道2中断<br />
DMAChannel3_IRQChannel：DMA通道3中断<br />
DMAChannel4_IRQChannel：DMA通道4中断<br />
DMAChannel5_IRQChannel：DMA通道5中断<br />
DMAChannel6_IRQChannel：DMA通道6中断<br />
DMAChannel7_IRQChannel：DMA通道7中断<br />
ADC_IRQChannel：ADC全局中断<br />
USB_HP_CANTX_IRQChannel：USB高优先级或者CAN发送中断<br />
USB_LP_CAN_RX0_IRQChannel：USB低优先级或者CAN接收0中断<br />
CAN_RX1_IRQChannel：CAN接收1中断<br />
CAN_SCE_IRQChannel：CAN SCE中断<br />
EXTI9_5_IRQChannel：外部中断线9-5中断<br />
TIM1_BRK_IRQChannel：TIM1暂停中断<br />
TIM1_UP_IRQChannel：TIM1刷新中断<br />
TIM1_TRG_COM_IRQChannel：TIM1触发和通讯中断<br />
TIM1_CC_IRQChannel：TIM1捕获比较中断<br />
TIM2_IRQChannel：TIM2全局中断<br />
TIM3_IRQChannel：TIM3全局中断<br />
TIM4_IRQChannel：TIM4全局中断<br />
I2C1_EV_IRQChannel：I2C1事件中断<br />
I2C1_ER_IRQChannel：I2C1错误中断<br />
I2C2_EV_IRQChannel：I2C2事件中断<br />
I2C2_ER_IRQChannel：I2C2错误中断<br />
SPI1_IRQChannel：SPI1全局中断<br />
SPI2_IRQChannel：SPI2全局中断<br />
USART1_IRQChannel：USART1全局中断<br />
USART2_IRQChannel：USART2全局中断<br />
USART3_IRQChannel：USART3全局中断<br />
EXTI15_10_IRQChannel：外部中断线15-10中断<br />
RTCAlarm_IRQChannel：RTC闹钟通过EXTI线中断<br />
USBWakeUp_IRQChannel：USB通过EXTI线从悬挂唤醒中断<br />
</p>

<p>
NVIC_IRQChannelPreemptionPriority <br />
该参数设置了成员NVIC_IRQChannel中的先占优先级<br />
</p>

<p>
NVIC_IRQChannelSubPriority <br />
该参数设置了成员NVIC_IRQChannel中的从优先级<br />
</p>




<p>
5 函数NVIC_StructInit<br />
</p>

<p>
功能描述：把NVIC_InitStruct中的每一个参数按缺省值填入<br />
NVIC_InitStruct：指向结构NVIC_InitTypeDef的指针，待初始化<br />
例： <br />
NVIC_InitTypeDef NVIC_InitStructure; <br />
NVIC_StructInit(&amp;NVIC_InitStructure);<br />
</p>

<p>
NVIC_InitStruct缺省值<br />
NVIC_IRQChannel：0x0 <br />
NVIC_IRQChannelPreemptionPriority：0 <br />
NVIC_IRQChannelSubPriority：0 <br />
NVIC_IRQChannelCmd：DISABLE<br />
</p>


<p>
6 函数NVIC_SETPRIMASK<br />
</p>

<p>
功能描述：使能PRIMASK优先级：提升执行优先级至0<br />
1. 该函数由汇编语言书写。<br />
2. 该函数只影响组优先级，不影响从优先级。<br />
3. 在设置PRIMASK寄存器前，建议在从为了使能一个例外中另一个例外返回时，清除该寄存器<br />
例： <br />
NVIC_SETPRIMASK();<br />
</p>


<p>
7 函数NVIC_RESETPRIMASK<br />
</p>

<p>
功能描述：失能PRIMASK优先级<br />
例： <br />
NVIC_RESETPRIMASK();<br />
</p>


<p>
8 函数NVIC_SETFAULTMASK<br />
</p>

<p>
功能描述：使能FAULTMASK优先级：提升执行优先级至-1<br />
1. 该函数由汇编语言书写。<br />
2. 该函数只影响组优先级，不影响从优先级。<br />
3. FAULTMASK只有在执行优先级值小于-1的情况下才能被设置，设置FAULTMASK将它的执行优先级提升到HardFAULT的级别。每当从除NMI之外的例外中返回，FAULTMASK会被自动清除。<br />
例： <br />
NVIC_SETFAULTMASK();<br />
</p>


<p>
9 函数NVIC_RESETFAULTMASK<br />
</p>

<p>
功能描述：失能FAULTMASK优先级<br />
1. 该函数由汇编语言书写。<br />
例： <br />
NVIC_RESETPRIMASK();<br />
</p>


<p>
10 函数NVIC_BASEPRICONFIG<br />
</p>

<p>
功能描述：改变执行优先级从N（最低可设置优先级）提升至1<br />
1. 该函数由汇编语言书写。<br />
2. 该函数只影响组优先级，不影响从优先级。<br />
3. 可以改变执行优先级，从N（最低可设置优先级）提升至1。将该寄存器清除至0不会影响当前的优先级，它的非零值起到优先级屏蔽的作用，执行后当BASEPRI定义的优先级高于当前优先级时，该操作将起作用。<br />
例： <br />
NVIC__BASEPRICONFIG(10);<br />
</p>


<p>
11 函数NVIC_GetBASEPRI<br />
</p>

<p>
功能描述：返回BASEPRI屏蔽值<br />
例： <br />
u32 BASEPRI_Mask = 0; <br />
BASEPRI_Mask = NVIC_GetBASEPRI();<br />
</p>


<p>
12 函数NVIC_GetCurrentPendingIRQChannel<br />
</p>

<p>
功能描述：返回当前待处理IRQ标识符<br />
例： <br />
u16 CurrentPendingIRQChannel; <br />
CurrentPendingIRQChannel = NVIC_GetCurrentPendingIRQChannel();<br />
</p>


<p>
13 函数NVIC_GetIRQChannelPendingBitStatus<br />
</p>

<p>
功能描述：检查指定的IRQ通道待处理位设置与否<br />
例： <br />
ITStatus IRQChannelPendingBitStatus; <br />
IRQChannelPendingBitStatus = <br />
NVIC_GetIRQChannelPendingBitStatus(ADC_IRQChannel);<br />
</p>


<p>
14 函数NVIC_SetIRQChannelPendingBit<br />
</p>

<p>
功能描述：设置指定的IRQ通道待处理位<br />
例： <br />
NVIC_SetIRQChannelPendingBit(SPI1_IRQChannel);<br />
</p>


<p>
15 函数NVIC_ClearIRQChannelPendingBit<br />
</p>

<p>
功能描述：清除指定的IRQ通道待处理位<br />
例： <br />
NVIC_ClearIRQChannelPendingBit(ADC_IRQChannel);<br />
</p>


<p>
16 函数NVIC_GetCurrentActiveHandler<br />
</p>

<p>
功能描述：返回当前活动的Handler（IRQ通道和系统Handler）的标识符<br />
例： <br />
u16 CurrentActiveHandler; <br />
CurrentActiveHandler = NVIC_GetCurrentActiveHandler();<br />
</p>


<p>
17 函数NVIC_GetIRQChannelActiveBitStatus<br />
</p>

<p>
功能描述：检查指定的IRQ通道活动位设置与否<br />
例： <br />
ITStatus IRQChannelActiveBitStatus; <br />
IRQChannelActiveBitStatus = <br />
NVIC_GetIRQChannelActiveBitStatus(ADC_IRQChannel);<br />
</p>


<p>
18 函数NVIC_GetCPUID<br />
</p>

<p>
功能描述：返回ID号码，Cortex-M3内核的版本号和实现细节<br />
例： <br />
u32 CM3_CPUID; <br />
CM3_CPUID = NVIC_GetCPUID();<br />
</p>


<p>
19 函数NVIC_SetVectorTable<br />
</p>

<p>
功能描述：设置向量表的位置和偏移<br />
例： <br />
NVIC_SetVectorTable(NVIC_VectTab_FLASH, 0x0);<br />
</p>

<p>
NVIC_VectTab <br />
该参数设置向量表基地址<br />
NVIC_VectTab_FLASH：向量表位于FLASH <br />
NVIC_VectTab_RAM：向量表位于RAM<br />
</p>


<p>
20 函数NVIC_GenerateSystemReset<br />
</p>

<p>
功能描述：产生一个系统复位<br />
例： <br />
NVIC_GenerateSystemReset();<br />
</p>


<p>
21 函数NVIC_GenerateCoreReset<br />
</p>

<p>
功能描述：产生一个内核（内核+NVIC）复位<br />
例： <br />
NVIC_GenerateCoreReset();<br />
</p>


<p>
22 函数NVIC_SystemLPConfig<br />
</p>

<p>
功能描述：选择系统进入低功耗模式的条件<br />
例： <br />
NVIC_SystemLPConfig(SEVONPEND, ENABLE);<br />
</p>

<p>
LowPowerMode <br />
该参数设置了设备的低功耗模式<br />
NVIC_LP_SEVONPEND：根据待处理请求唤醒<br />
NVIC_LP_SLEEPDEEP：深度睡眠使能 <br />
NVIC_LP_SLEEPONEXIT：退出ISR后睡眠<br />
</p>


<p>
23 函数NVIC_SystemHandlerConfig<br />
</p>

<p>
功能描述：使能或者失能指定的系统Handler<br />
例： <br />
/* Enable the Memory Manage Handler */ <br />
NVIC_SystemHandlerConfig(SystemHandler_MemoryManage, ENABLE);<br />
</p>

<p>
SystemHandler <br />
该参数设置了待使能或者失能指定的系统Handler<br />
SystemHandler_MemoryManage：存储器管理Handler <br />
SystemHandler_BusFault：总线错误Handler <br />
SystemHandler_UsageFault：使用错误Handler<br />
</p>



<p>
24 函数NVIC_SystemHandlerPriorityConfig<br />
</p>

<p>
功能描述：设置指定的系统Handler优先级<br />
例： <br />
NVIC_SystemHandlerPriorityConfig(SystemHandler_MemoryManage, 2, 8);<br />
</p>

<p>
SystemHandler <br />
该参数指定了待设置的系统Handler<br />
SystemHandler_MemoryManage：存储器管理Handler <br />
SystemHandler_BusFault：总线错误Handler <br />
SystemHandler_UsageFault：使用错误Handler <br />
SystemHandler_SVCall：SVCall Handler <br />
SystemHandler_DebugMonitor：除错监控Handler <br />
SystemHandler_PSV：PSV Handler <br />
SystemHandler_SysTick：系统滴答定时器Handler<br />
</p>


<p>
25 函数NVIC_GetSystemHandlerPendingBitStatus<br />
</p>

<p>
功能描述：检查指定的系统Handler待处理位设置与否<br />
例： <br />
MemoryHandlerStatus =NVIC_GetSystemHandlerPendingBitStatus(SystemHandler_MemoryManage);<br />
</p>

<p>
SystemHandler <br />
该参数指定系统Handler<br />
SystemHandler_MemoryManage：存储器管理Handler <br />
SystemHandler_BusFault：总线错误Handler <br />
SystemHandler_SVCall：SVCall Handler<br />
</p>


<p>
26 函数NVIC_SetSystemHandlerPendingBit<br />
</p>

<p>
功能描述：设置系统Handler待处理位<br />
例： <br />
NVIC_SetSystemHandlerPendingBit(SystemHandler_NMI);<br />
</p>

<p>
SystemHandler <br />
该参数指定系统Handler<br />
SystemHandler_NMI：NMI Handler <br />
SystemHandler_PSV：PSV Handler <br />
SystemHandler_SysTick：系统滴答定时器 Handler<br />
</p>


<p>
27 函数NVIC_ClearSystemHandlerPendingBit<br />
</p>

<p>
功能描述：清除系统Handler待处理位<br />
例： <br />
NVIC_ClearSystemHandlerPendingBit(SystemHandler_SysTick);<br />
</p>

<p>
SystemHandler <br />
该参数指定系统Handler<br />
SystemHandler_PSV：PSV Handler <br />
SystemHandler_SysTick：系统滴答定时器 Handler<br />
</p>


<p>
28 函数NVIC_GetSystemHandlerActiveBitStatus<br />
</p>

<p>
功能描述：检查系统Handler活动位设置与否<br />
例： <br />
ITStatus BusFaultHandlerStatus; <br />
BusFaultHandlerStatus = <br />
NVIC_GetSystemHandlerActiveBitStatus(SystemHandler_BusFault);<br />
</p>

<p>
SystemHandler <br />
该参数指定系统Handler<br />
SystemHandler_MemoryManage：存储器管理Handler <br />
SystemHandler_BusFault：总线错误Handler <br />
SystemHandler_UsageFault：使用错误Handler <br />
SystemHandler_DebugMonitor：除错监控Handler <br />
SystemHandler_PSV：PSV Handler <br />
SystemHandler_SysTick：系统滴答定时器 Handler<br />
</p>


<p>
29 函数NVIC_GetFaultHandlerSources<br />
</p>

<p>
功能描述：返回表示出错的系统Handler源<br />
例： <br />
u32 BusFaultHandlerSource; <br />
BusFaultHandlerSource <br />
=NVIC_GetFaultHandlerSources(SystemHandler_BusFault);<br />
</p>

<p>
SystemHandler <br />
该参数指定系统Handler<br />
SystemHandler_HardFault：硬件错误Handler <br />
SystemHandler_MemoryManage：存储器管理Handler <br />
SystemHandler_BusFault：总线错误Handler <br />
SystemHandler_UsageFault：使用错误Handler <br />
SystemHandler_DebugMonitor：除错监控Handler<br />
</p>


<p>
30 函数NVIC_GetFaultAddress<br />
</p>

<p>
功能描述：返回产生表示出错的系统Handler所在位置的地址<br />
例： <br />
u32 BusFaultHandlerAddress; <br />
BusFaultHandlerAddress = <br />
NVIC_GetFaultAddress(SystemHandler_BusFault);<br />
</p>

<p>
SystemHandler <br />
该参数指定系统Handler<br />
SystemHandler_MemoryManage：存储器管理Handler <br />
SystemHandler_BusFault：总线错误Handler<br />
</p>


<div class="foot">
<button id="back_to_topA" class="back_to_top" style='background-color:red'>返回顶部</button>

<a id="returnIndexA" href="d:\vim\vim\mysite\note_html\笔记整理.html" onclick="fun_a()">
<button id=returnIndex class="back_to_index">返回首页</button>
</a>



<HR SIZE=5>
<p class="left">
<!-- <div class="text" style=" text-align:center;font-size:15px"></div>-->
© <span id="year">2018</span> 
</p>
<script src="scripts/my.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/XRegExp.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shCore.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shBrushJava.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shBrushJScript.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shBrushSql.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shBrushCSharp.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shBrushCss.js"></script>
<script type="text/javascript" src="scripts/codeStyleScript/shBrushPerl.js"></script>
<script type="text/javascript">
	SyntaxHighlighter.all()
</script>
</div>
</div>
</body>
</html>
