<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<title>MES</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>

<h1>目录：</h1>
<div class="toc">
<ul>
<li><a href="#toc_1">目的 </a>
<li><a href="#toc_2">框架 </a>
<li><a href="#toc_3">板的信息 </a>
<li><a href="#toc_4">术语 </a>
<ul>
<li><a href="#toc_4.1">Q </a>
<li><a href="#toc_4.2">系统 </a>
</ul>
<li><a href="#toc_5">重点优先 </a>
<li><a href="#toc_6">产能 </a>
<li><a href="#toc_7">排产 </a>
<ul>
<li><a href="#toc_7.1">工作中心 </a>
</ul>
<li><a href="#toc_8">AGV </a>
<ul>
<li><a href="#toc_8.1">AGV解决方案 </a>
</ul>
<li><a href="#toc_9">流程 </a>
<li><a href="#toc_10">环球镭射 </a>
<ul>
<li><a href="#toc_10.1">关心的问题 </a>
</ul>
<li><a href="#toc_11">LDI </a>
<li><a href="#toc_12">看板和报表 </a>
<li><a href="#toc_13">traceability  of the all technological process </a>
<li><a href="#toc_14">HslCommunication </a>
<li><a href="#toc_15">MES系统架构 </a>
<li><a href="#toc_16">Recipe and trace ability </a>
<ul>
<li><a href="#toc_16.1">Recipe下发 </a>
<ul>
<li><a href="#toc_16.1.1">Drill Machine </a>
<li><a href="#toc_16.1.2">奥宝LDI </a>
<ul>
<li><a href="#toc_16.1.2.1">路径 </a>
<li><a href="#toc_16.1.2.2">需要的参数 </a>
<li><a href="#toc_16.1.2.3">下发Recipe </a>
<li><a href="#toc_16.1.2.4">参数采集 </a>
<li><a href="#toc_16.1.2.5">问题点 </a>
</ul>
<li><a href="#toc_16.1.3">压机Recipe </a>
<li><a href="#toc_16.1.4">Lay-Up Error proofing </a>
<li><a href="#toc_16.1.5">内层DES复制棕化Recipe </a>
</ul>
<li><a href="#toc_16.2">trace ability </a>
<ul>
<li><a href="#toc_16.2.1">解决方案 </a>
<ul>
<li><a href="#toc_16.2.1.1">内层二维码 </a>
<li><a href="#toc_16.2.1.2">次外层或外层二维码 </a>
</ul>
<li><a href="#toc_16.2.2">文字二维码 </a>
<ul>
<li><a href="#toc_16.2.2.0.1">二维码类型 </a>
<li><a href="#toc_16.2.2.0.2">打码数据类型 </a>
<li><a href="#toc_16.2.2.0.3">二维码规则 </a>
</ul>
</ul>
</ul>
</ul>
<li><a href="#toc_17">打电话系统 pjsip4net </a>
<li><a href="#toc_18">三化一稳 </a>
<ul>
<li><a href="#toc_18.1">怎么找到某个产品使用的物料批次？ </a>
</ul>
<li><a href="#toc_19">上下板机 </a>
<li><a href="#toc_20">WMS System </a>
<ul>
<li><a href="#toc_20.1">WCS系统 </a>
</ul>
<li><a href="#toc_21">AGV </a>
<li><a href="#toc_22">采集服务 </a>
<ul>
<li><a href="#toc_22.1">AOI </a>
<li><a href="#toc_22.2">采集更新 </a>
<li><a href="#toc_22.3">设备连接更新 </a>
<li><a href="#toc_22.4">客户端 </a>
<li><a href="#toc_22.5">服务端 </a>
</ul>
<li><a href="#toc_23">看板 </a>
<ul>
<li><a href="#toc_23.1">定时器没有定时执行了 </a>
</ul>
</ul>
</div>

<h1 id="toc_1">目的 </h1>
<ol>
<li>
建立数字化车间

<li>
打通车间信息流

<li>
实现产品的全流程追溯

<li>
车间无纸化，可视化

<li>
自动化，智能化，可视化。

</ol>

<p>
接收
开工
完工
</p>


<h1 id="toc_2">框架 </h1>
<p>
车间服务器
</p>

<h1 id="toc_3">板的信息 </h1>
<p>
叠构信息，品质管理，包装信息，返修信息
</p>



<p>
<a href="CIMOM_TABLE.html">CIMOM_TABLE</a><br>
</p>

<p>
<a href="MES功能模块.html">MES功能模块</a><br>
</p>

<h1 id="toc_4">术语 </h1>
<p>
配料单，
流程卡
</p>

<p>
批次号，作业单号，lot卡，流程卡，工单
</p>
<h2 id="toc_4.1">Q </h2>
<p>
是否可以根据工单，获取批次号
流程卡，lot卡，工单分别指什么？
</p>

<h2 id="toc_4.2">系统 </h2>
<p>
FAQ 常见的系统问题处理。
</p>


<h1 id="toc_5">重点优先 </h1>
<p>
racipe and tracebility
高级计划排程
</p>


<h1 id="toc_6">产能 </h1>
<p>
标准产能
单机产能
</p>


<h1 id="toc_7">排产 </h1>
<h2 id="toc_7.1">工作中心 </h2>
<p>
工作中心可以是车间，可以是一条线。排机的时候可以排到
生产排机
物料接收
</p>


<p>
主计划
线计划
</p>



<h1 id="toc_8">AGV </h1>
<p>
上料，下料，转运空盘
</p>

<p>
待料中
配料中
</p>

<p>
异常存储区
空盘存储区
物料存储区
</p>

<h2 id="toc_8.1">AGV解决方案 </h2>
<p>
如果是待料状态，则一直呼叫，如果返回的是0，则表示待料。返回的是1，则表示正在配料中。
</p>

<p>
如果使用队列模式，则需要添加一个服务，查询队列后调用AGV，等于队列+服务+中间件三个程序在跑。
</p>


<h1 id="toc_9">流程 </h1>
<p>
工段(钻孔)-&gt;工序(钻孔工段分为机械钻，镭射钻等工序)-&gt;工艺流程(机械钻孔1是工艺流程)
</p>


<h1 id="toc_10">环球镭射 </h1>
<p>
1，计划排程
2，钻带和参数下发
3，
	棕化减铜下料后，写入信息到RFID。RFID绑定锣卡信息等。
</p>

<p>
	环球的MES更具计划排程，自动从立体仓取出加工。
</p>

<p>
	需要知道当前设备的状态等信息。
</p>
	
<h2 id="toc_10.1">关心的问题 </h2>
<ol>
<li>
服务器部署到云，不安全。

<li>
操作和维护文档。现场处理问题比较及时和快速。

<li>


</ol>

<h1 id="toc_11">LDI </h1>


<h1 id="toc_12">看板和报表 </h1>
<p>
应用场景
</p>

<p>
领导，领班，员工
包括：设备，人员，计划，品质
稼动率多少
</p>


<h1 id="toc_13">traceability  of the all technological process </h1>
<p>
	we use the scan machine to get the parameters, which include temperature, speed, pressure etc.
</p>
	
<p>
	Data source：PLC(register)、 sensing element 、IPC
</p>

<p>
<a href="CIMOM.html">CIMOM</a><br>
</p>

<h1 id="toc_14">HslCommunication </h1>
<p>
主界面 HslCommunicationDemo.FormLoad
三菱  FormMelsecBinary  
</p>

<p>
西门子  DB206.226  DB205.16速度
</p>



<p>
1，添加引用。
2，减DemoUtils类。
3，
</p>


<h1 id="toc_15">MES系统架构 </h1>
<p>
<img src="file://D:\vim\vim\mysite\note/images/mes系统架构.jfif" />
</p>


<h1 id="toc_16">Recipe and trace ability </h1>
<h2 id="toc_16.1">Recipe下发 </h2>
<p>
after scan the LOT, select the parameters automatically
</p>

<h3 id="toc_16.1.1">Drill Machine </h3>
<ol>
<li>
PDA scan the machine, LOT, staff information. import the drill tool into the machine's directory automatically

<li>
Display the imformation which include the 管位孔 deep， 叠板数，and the drill tool’s parameters

<li>
Staff operate and confirm the information accroding to the PDA instructions.

<li>


</ol>


<h3 id="toc_16.1.2">奥宝LDI </h3>
<p>
干膜不通，曝光能量不同，
</p>

<ul>
<li>
涨缩

</ul>
<p>
LDI机有固定涨缩和自动涨缩，固定涨缩是工艺测量后输入涨缩值。自动涨缩是LDI机自动测量涨缩值，然后进行涨缩。
</p>

<h4 id="toc_16.1.2.1">路径 </h4>
<p>
\\10.80.13.52\dp\dpconfig\setpuf
\\10.80.13.52\dp\cam\dp100-jobs
</p>

<h4 id="toc_16.1.2.2">需要的参数 </h4>
<p>
工程输出的文件
IMAGE-SETUP-FILE-NAME=设定的文件名
INITIAL-SERIAL-NUMBER=
IMAGE-SETUP-FILE-NAME=
LINE-NUM= *这行添加了行后必须更改。
</p>

<h4 id="toc_16.1.2.3">下发Recipe </h4>
<p>
解决方案1，扫描工单后，下载资料和参数，DI机进行做资料处理。
解决方案2，MES自动排产，自动放资料和参数，DI机进行资料处理。
</p>

<p>
资料处理完后板进行曝光的时候，员工扫工单，LDI调取相对应的资料。做板。
</p>

<h4 id="toc_16.1.2.4">参数采集 </h4>
<p>
通过批次号和初始序列号绑定，通过初始序列号查出参数。
希望奥宝能把我们的pnl条码读取，然后绑定序列号。(可通过条码，或pnl追溯)，或者通过扫工单后，工单和序列号绑定(可通过Lot卡追溯，不能追溯具体到板，但是Lot卡和pnl条码能否在开料打码的地方绑定？)。
</p>

<h4 id="toc_16.1.2.5">问题点 </h4>
<ol>
<li>
流程能否优化，把扫描工单的做成自动根据计划排产调用。

<li>
资料回收，有ECN或发现资料错误，需要更改的时候，能通过接口自动删除资料。

</ol>


<h3 id="toc_16.1.3">压机Recipe </h3>
<p>
先绑定LOT卡和载盘标签。(知道载盘里面的对应的什么料号)
载盘在进去的之前自动扫标签。查找该料号用的是什么Recipe。然后调用存储过程[SP_SFC_LAM_LOT_BARCODE]，往压机供应商提供的数据库表里面写数据。
压机根据数据库表LAUFFER_RECIPE.dbo.Load_Data  自动更改程式。
</p>



<h3 id="toc_16.1.4">Lay-Up Error proofing </h3>
<ul>
<li>
create a task code

<li>
create second or outer LOTNO

<li>
binding second or outer item num. bkh85445a0.IN27

<li>


</ul>

<p>
1，添加记录。
2，下发前添加判断当前料号和扫描料号是否为同一个料号。如果是同一个料号，时间超过一天，重新下发配方。如果是不同料号，重新下发配方(防止配方下发后HDM下更改。)
3， 记录当前机台号的当前料号，当前recipe
</p>



<h3 id="toc_16.1.5">内层DES复制棕化Recipe </h3>
<p>
1，复制项目文件夹。
2，添加现有项目。
3，修改所有命名空间(卸载其它的)
4，修改csproj里面的生成的dll名字。
5，修改service
</p>


<h2 id="toc_16.2">trace ability </h2>
<p>
条码规则
</p>

<p>
机台号，相当于分配了一个IP段。
每年自动从0开始
</p>

<p>
物料，叠构，工艺参数都可以追溯。
</p>


<h3 id="toc_16.2.1">解决方案 </h3>
<h4 id="toc_16.2.1.1">内层二维码 </h4>
<ol>
<li>
在开料水洗添加吴德和设备，打通孔或者是盲孔二维码。

<li>
在内层LDI，通过设备生成二维码

</ol>
	

<h4 id="toc_16.2.1.2">次外层或外层二维码 </h4>
<ol>
<li>
在XRAY的时候通过读取内层二维码，用针式在板边钻个二维码，转到次外层或外层二维码。

</ol>
<p>
次外层和外层二维码和最上面的内层二维码相同。
</p>


<h3 id="toc_16.2.2">文字二维码 </h3>
<ol>
<li>
CAM 输出坐标和类型(明码，二维码，lot卡号) [WZDGERP].[wisdompcb].[dbo].[Print2D_CAM]

<li>


</ol>

<h5 id="toc_16.2.2.0.1">二维码类型 </h5>
<p>
明码
二维码
</p>

<h5 id="toc_16.2.2.0.2">打码数据类型 </h5>
<ol>
<li>
对应的表[WZDGERP].[wisdompcb].[dbo].[Print2D_BarDef_Detail] 

<li>
ERP市场下单后会录入打码类型[Print2D_BarDef]，

<li>
CAM输出到表[Print2D_CAM]

<li>
读取CAM的每一行，通过第2步的IDKey和第三步cam输出的文字类型，在[Print2D_BarDef_Detail]里面找到对应的[Parent_IDKey]和printType条件。找出，从而找到拼接打印的字符[pnl条码+set号+edit号]。

</ol>

<p>
二维码数据6*6 4*4
明码数据10*10
阻抗LOT号1*1.5
</p>

<h5 id="toc_16.2.2.0.3">二维码规则 </h5>
	



<p>
<a href="LDI machine.html">LDI machine</a><br>
<a href="奥宝LDI机.html">奥宝LDI机</a><br>
</p>

<h1 id="toc_17">打电话系统 pjsip4net </h1>


<h1 id="toc_18">三化一稳 </h1>
<h2 id="toc_18.1">怎么找到某个产品使用的物料批次？ </h2>
<p>
	MES增加追溯功能。可以根据
</p>
<ol>
<li>
客户料号

<li>
客户订单号

<li>
本厂编号
	进行追溯。直接查用了哪些物料，用的是哪个批次的物料。

</ol>
	

<h1 id="toc_19">上下板机 </h1>
<p>
如果扫描的扫到lot卡和目前使用的Recipe不是同一个绑定的Recipe，停掉上下板机。
</p>
<ol>
<li>
记录当前Recipe

<li>
扫描线路板

<li>
比对

<li>


</ol>

<p>
读取地址
	控制模式：
</p>
<ul>
<li>
人工模式

<li>
AGV
		*

</ul>
		
<h1 id="toc_20">WMS System </h1>
<p>
时间节点 ：交付时间，实施时间
三楼成品库，二楼材料库。
材料+成品
 最小包装
 最小条码
 跑箱
 堆垛机
 码垛机
 出库，入库，发料，配料。
 五垛+五箱()
 agv调度系统
</p>
 
<p>
WMS&lt;=&gt;WCS&lt;=&gt;MES
</p>

<h2 id="toc_20.1">WCS系统 </h2>
<p>
用于调度传送带和堆垛机
</p>

<p>
MES 通过WCS系统下发指令(存货，取货，运货)
</p>

 
<h1 id="toc_21">AGV </h1>
<p>
站点
到了站点，发信息给系统
</p>

<h1 id="toc_22">采集服务 </h1>
<p>
一开始就添加死循环，会造成服务无法启动。
</p>

<p>
经常有-1的情况，可能是线程太多，PLC访问的资源被占用
</p>

<p>
onTimer定时器0.5s增加一个线程，0.5s执行不完一个线程。导致增加的比执行的快，线程越来越多，占用的内存越来越大。
</p>

<p>
采集的有时候十分钟才采集一次，中间有一次报错没有重新获取。
</p>

<p>
如果要使同一条线是多线程，则需要考虑线程同步。否则会出现抢用资源问题。所以要添加锁。
</p>

<p>
一开始用的定时器，定时器会莫名其妙地不工作。后面改为线程去执行，线程里面添加循环，等待。
</p>

<p>
ThreadPool.QueueUserWorkItem  有可能一直都不会执行，因为线程一直都是满了。
</p>


<p>
配置如果放文档，则多台服务器管理麻烦，无法保证两台服务器的IP不冲突。
</p>

<p>
redis+服务器文档+中间件
只读redis。更新比较麻烦，每次需要到服务器更改配置文档
</p>

<p>
redis+服务器文档+中间件+本地文档 本地文档只是调试使用。
</p>


<h2 id="toc_22.1">AOI </h2>
<ol>
<li>
缺陷地图 缺陷坐标生成。1，由供应商提供。2，供应商提供数据，展示由我们做

<li>
AOI扫描pnl条码，绑定喷印明码，输出

<li>
VRS输出，和AOI机比对，生成误报率

<li>
打叉板位置。修板位置。

</ol>


<h2 id="toc_22.2">采集更新 </h2>
<p>
更新设备，在中间件服务器更新，更新地址，在ConnectPLCServer里面更新。因为中间件里面报错。
</p>

<h2 id="toc_22.3">设备连接更新 </h2>
<p>
通过中间件更新Redis，服务端定时查找是否有更新。
</p>

<h2 id="toc_22.4">客户端 </h2>
<p>
先获取是哪台电脑。然后根据哪台电脑去Redis对应的对象，对象包括IP，上下板机列表，水平线列表等。
</p>

<h2 id="toc_22.5">服务端 </h2>
<p>
根据配置文档，把哪台设备对应的是哪个对象放入Redis，更新某台设备的时候就同时更新该配置。
</p>


<ol>
<li>
是否需要专门写个服务，更新服务器的采集分布情况。

<li>
更新采集是单独更新某个设备，因为地址会重新更新。所有更新

</ol>


<h1 id="toc_23">看板 </h1>
<p>
html + svg
图扑科技
</p>

<h2 id="toc_23.1">定时器没有定时执行了 </h2>


<p>
<a href="camstar.html">camstar</a><br>
</p>

<button class="back_to_top" style='background-color:red'>返回顶部</button>

<a href="https://weipiaoyun.github.io/note_html/笔记整理.html">
<button class="back_to_index" style='background-color:red'>返回首页</button>
</a>

<script src="my.js"></script>
<HR SIZE=5>
<p class="left">
<!-- <div class="text" style=" text-align:center;font-size:15px"></div>-->
© <span id="year">2018</span> 
</p>
</body>
</body>
</html>
